<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ravi Sauce Labs</title>
    <style>
        /* ── RESET ─────────────────────────────────────────────── */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --green:  #2DD512;
            --gd:     #25B50F;
            --black:  #111;
            --muted:  #666;
            --g1:     #f5f5f5;
            --g2:     #efefef;
            --g3:     #ccc;
            --nav-h:  70px;
            --r:      16px;
            --font:   -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        html { scroll-behavior: smooth; }
        ::selection { background: rgba(45,213,18,.25); color: #111; }

        body {
            font-family: var(--font);
            background: #fff;
            color: var(--black);
        }

        img { display: block; max-width: 100%; }
        button { font-family: var(--font); cursor: pointer; }

        /* ── HEADER ─────────────────────────────────────────────── */
        .header {
            position: fixed;
            top: 0; left: 0; right: 0;
            height: var(--nav-h);
            background: #fff;
            border-bottom: 1px solid var(--g2);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 24px;
            z-index: 1000;
            transition: box-shadow .3s, background .3s, border-color .3s;
        }
        .header.scrolled {
            background: rgba(255,255,255,.96);
            backdrop-filter: blur(12px);
            box-shadow: 0 1px 20px rgba(0,0,0,.06);
            border-bottom-color: transparent;
        }

        .logo-wrap {
            position: absolute;
            left: 24px;
            perspective: 600px;
            perspective-origin: center center;
        }
        .logo {
            width: 44px; height: 44px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer;
            border: none;
            background: transparent;
            border-radius: 50%;
            transform-style: preserve-3d;
            animation: logoSpin3d 6s linear infinite;
        }
        /* Front face — the logo image */
        .logo img {
            width: 100%; height: 100%; object-fit: contain;
            border-radius: 50%;
            backface-visibility: visible;
        }
        /* Back face — solid circle that shows when coin is flipped */
        .logo::after {
            content: '';
            position: absolute; inset: 0;
            border-radius: 50%;
            background: radial-gradient(circle at 35% 35%, #3a3a3a, #111);
            transform: rotateY(180deg);
            backface-visibility: hidden;
        }
        .logo img { backface-visibility: hidden; }
        @keyframes logoSpin3d {
            0%   { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        /* ── NAV ─────────────────────────────────────────────────── */
        .nav-tabs { display: flex; gap: 4px; }

        .nav-tab {
            height: 40px;
            padding: 0 18px;
            border-radius: 20px;
            font-size: 15px;
            font-weight: 500;
            border: none;
            background: transparent;
            color: var(--muted);
            transition: background .15s, color .15s;
        }
        .nav-tab:hover  { background: var(--g2); color: var(--black); }
        .nav-tab.active { background: var(--black); color: #fff; }

        /* ── MOBILE TOGGLE ───────────────────────────────────────── */
        .mobile-toggle {
            display: none;
            flex-direction: column;
            gap: 5px;
            padding: 8px;
            background: transparent;
            border: none;
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
        }
        .h-line { height: 2px; width: 24px; background: var(--black); border-radius: 2px; transition: all .3s; }

        @media (max-width: 768px) {
            .nav-tabs { display: none; }
            .mobile-toggle { display: flex; }
        }

        /* Hide Saved on mobile */
        @media (max-width: 768px) {
            .nav-tab[data-page="saved"] { display: none; }
        }
        @media (pointer: coarse) {
            .mob-item[data-page="saved"] { display: none; }
        }

        /* ── MOBILE MENU ─────────────────────────────────────────── */
        .mob-menu {
            position: fixed;
            top: 0; right: -100%;
            width: 80%; max-width: 340px;
            height: 100vh;
            background: #0a0a0a;
            border-left: 1px solid #1f1f1f;
            z-index: 5000;
            transition: right .4s cubic-bezier(.34,1.56,.64,1);
            display: flex;
            flex-direction: column;
            font-family: 'Courier New', monospace;
        }
        .mob-menu.open { right: 0; }

        .mob-backdrop {
            position: fixed; inset: 0;
            background: rgba(0,0,0,.75);
            z-index: 4999;
            opacity: 0; pointer-events: none;
            transition: opacity .3s;
        }
        .mob-backdrop.open { opacity: 1; pointer-events: all; }

        .mob-head {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 22px 20px;
            border-bottom: 1px solid #1a1a1a;
        }
        .mob-id { font-size: 10px; letter-spacing: 2px; color: var(--green); }

        .mob-close {
            width: 36px; height: 36px;
            background: transparent;
            border: 1px solid #333;
            border-radius: 50%;
            color: #888;
            display: flex; align-items: center; justify-content: center;
            transition: all .2s;
        }
        .mob-close:hover { border-color: var(--green); color: var(--green); transform: rotate(90deg); }

        .mob-items { flex: 1; padding: 16px; display: flex; flex-direction: column; gap: 10px; }

        .mob-item {
            display: flex;
            align-items: center;
            gap: 18px;
            padding: 18px 20px;
            background: #0f0f0f;
            border: 1px solid #1a1a1a;
            border-radius: 10px;
            cursor: pointer;
            text-align: left;
            width: 100%;
            transition: background .2s, border-color .2s;
        }
        .mob-item:hover,
        .mob-item.active { background: #1a1a1a; border-color: var(--green); }

        .mob-num   { font-size: 10px; color: var(--green); opacity: .7; }
        .mob-label { font-size: 13px; letter-spacing: 2px; color: #fff; }

        .mob-foot {
            padding: 20px;
            border-top: 1px solid #1a1a1a;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .mob-status { display: flex; align-items: center; gap: 8px; font-size: 10px; letter-spacing: 1px; color: var(--green); }
        .status-dot { width: 6px; height: 6px; background: var(--green); border-radius: 50%; animation: pulse 2s infinite; }

        @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.35} }

        /* ── MAIN ─────────────────────────────────────────────────── */
        .main {
            padding-top: calc(var(--nav-h) + 4px);
            padding-left: 18px;
            padding-right: 18px;
            padding-bottom: 40px;
            min-height: 100vh;
        }
        /* Mobile padding matches masonry gutter */
        @media (max-width: 900px) {
            .main { padding-left: 8px; padding-right: 8px; }
            .hero { margin-left: -8px; margin-right: -8px; }
        }
        @media (max-width: 600px) {
            .main { padding-left: 6px; padding-right: 6px; }
            .hero { margin-left: -6px; margin-right: -6px; }
        }

        .page { display: none; opacity: 0; transform: translateY(16px); }
        .page.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
            animation: pageIn .4s cubic-bezier(.34,1.56,.64,1);
        }
        @keyframes pageIn { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }

        /* ── MASONRY ──────────────────────────────────────────────── */
        .masonry-grid { column-count: 4; column-gap: 18px; padding-top: 18px; }

        @media (max-width: 900px)  { .masonry-grid { column-count: 3; column-gap: 8px; padding-top: 8px; } }
        @media (max-width: 600px)  { .masonry-grid { column-count: 2; column-gap: 6px; padding-top: 6px; } }

        /* ── PIN ──────────────────────────────────────────────────── */
        @keyframes shimmer {
            0%   { background-position: -200% 0; }
            100% { background-position:  200% 0; }
        }
        .pin {
            break-inside: avoid;
            margin-bottom: 18px;
            border-radius: var(--r);
            overflow: hidden;
            position: relative;
            cursor: pointer;
            background: linear-gradient(90deg, #efefef 25%, #e2e2e2 50%, #efefef 75%);
            background-size: 200% 100%;
            animation: shimmer 1.4s ease-in-out infinite;
            transform-style: preserve-3d;
        }
        .pin.loaded { background: none; animation: none; }
        @media (max-width: 900px) { .pin { margin-bottom: 8px; } }
        @media (max-width: 600px) { .pin { border-radius: 8px; margin-bottom: 6px; } }

        .pin img {
            width: 100%;
            display: block;
            border-radius: var(--r);
            opacity: 0;
            transform: translateY(12px);
            transition: opacity .4s ease, transform .4s ease;
        }
        .pin img.visible { opacity: 1; transform: translateY(0); }
        @media (max-width: 600px) { .pin img { border-radius: 8px; } }

        /* ── PIN SIZE VARIANTS (randomly assigned each load) ── */
        .sz-s  img { aspect-ratio: 4/3;  object-fit: cover; }
        .sz-m  img { aspect-ratio: 2/3;  object-fit: cover; }
        .sz-l  img { aspect-ratio: 1/1.6; object-fit: cover; }
        .sz-xl img { aspect-ratio: 9/16; object-fit: cover; }

        /* Hide save overlay on touch devices */
        @media (pointer: coarse) { .pin-overlay { display: none; } }

        .pin-overlay {
            position: absolute; inset: 0;
            border-radius: var(--r);
            background: rgba(0,0,0,.35);
            opacity: 0;
            transition: opacity .2s;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 12px;
        }
        @media (max-width: 600px) { .pin-overlay { border-radius: 12px; } }
        .pin:hover .pin-overlay { opacity: 1; }

        .save-btn {
            align-self: flex-end;
            background: var(--green);
            color: #fff;
            border: none;
            padding: 10px 18px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 15px;
            transition: transform .1s, background .15s;
        }
        .save-btn:hover  { background: var(--gd); transform: scale(1.05); }
        .save-btn.saved  { background: var(--black); }

        /* ── LIGHTBOX ─────────────────────────────────────────────── */
        .lightbox {
            position: fixed; inset: 0;
            background: rgba(0,0,0,.92);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .lightbox.active { display: flex; }

        /*
         * CLOSE BUTTON FIX:
         * • position:fixed so it's always top-right of the SCREEN, not the image
         * • display:flex + align/justify center so the SVG is pixel-perfect centered
         * • SVG instead of the × character (no font-metric surprises)
         */
        .lb-close {
            position: fixed;
            top: 18px;
            right: 18px;
            width: 44px;
            height: 44px;
            background: rgba(255,255,255,.15);
            border: 1.5px solid rgba(255,255,255,.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2010;
            color: #fff;
            transition: background .15s, transform .2s;
        }
        .lb-close:hover { background: rgba(255,255,255,.28); transform: scale(1.08) rotate(90deg); }

        .lb-img-wrap {
            position: relative;
            max-width: min(90vw, 900px);
            max-height: 90vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lb-img-wrap img {
            max-width: 100%;
            max-height: 90vh;
            border-radius: var(--r);
            box-shadow: 0 24px 64px rgba(0,0,0,.6);
            display: block;
        }

        .lb-arrow {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            width: 44px; height: 44px;
            background: rgba(255,255,255,.15);
            border: 1.5px solid rgba(255,255,255,.25);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer;
            color: #fff;
            transition: background .15s;
            z-index: 2005;
        }
        .lb-arrow:hover { background: rgba(255,255,255,.28); }
        .lb-arrow.prev  { left: 20px; }
        .lb-arrow.next  { right: 20px; }
        @media (max-width: 600px) { .lb-arrow { display: none; } }

        /* ── SAVED EMPTY ──────────────────────────────────────────── */
        .saved-empty {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: calc(100vh - var(--nav-h));
            gap: 10px;
            color: var(--muted);
            text-align: center;
            padding: 40px 20px;
        }
        .saved-empty-icon { font-size: 48px; margin-bottom: 8px; }
        .saved-empty h3   { font-size: 22px; font-weight: 400; color: var(--black); }
        .saved-empty p    { font-size: 15px; max-width: 300px; line-height: 1.6; }

        .browse-link {
            margin-top: 8px;
            display: inline-block;
            padding: 12px 28px;
            background: var(--black);
            color: #fff;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            letter-spacing: .5px;
            transition: background .2s, transform .2s;
        }
        .browse-link:hover { background: var(--green); color: #000; transform: translateY(-2px); }

        /* ── SHOP — COMING SOON ───────────────────────────────────── */
        .coming-soon {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: calc(100vh - var(--nav-h));
            padding: 0 24px;
            text-align: center;
        }
        .cs-tag {
            font-size: 11px;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: var(--green);
            font-weight: 600;
            margin-bottom: 24px;
        }
        .coming-soon h1 {
            font-size: clamp(52px, 10vw, 96px);
            font-weight: 300;
            letter-spacing: -3px;
            line-height: 1;
            color: var(--black);
            margin-bottom: 20px;
        }
        .coming-soon p {
            font-size: 17px;
            color: var(--muted);
            line-height: 1.7;
            max-width: 360px;
            margin-bottom: 44px;
        }
        .cs-bar-wrap {
            width: 160px; height: 2px;
            background: var(--g2);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 12px;
        }
        .cs-bar-fill {
            height: 100%;
            background: var(--green);
            border-radius: 2px;
            animation: csSlide 2.4s ease-in-out infinite alternate;
        }
        @keyframes csSlide {
            0%   { width: 30%; margin-left: 0; }
            100% { width: 50%; margin-left: 50%; }
        }
        .cs-hint { font-size: 11px; letter-spacing: 2px; color: var(--g3); text-transform: uppercase; }

        /* ── SHOP ─────────────────────────────────────────────────── */
        .shop-wrap { min-height: calc(100vh - var(--nav-h)); }

        /* Hero */
        .shop-hero {
            position: relative;
            width: calc(100% + 36px);
            margin-left: -18px;
            margin-top: calc(-1 * (var(--nav-h) + 4px));
            height: 58vh; min-height: 380px;
            overflow: hidden;
            background: #000;
            border-radius: 0;
        }
        .shop-hero-bg {
            width: 100%; height: 100%;
            object-fit: cover; display: block;
            opacity: .72;
            filter: grayscale(20%);
        }
        .shop-hero-brand {
            position: absolute;
            bottom: 56px; left: 20px;
            font-size: clamp(56px, 11vw, 120px);
            font-weight: 900;
            line-height: .88;
            color: #fff;
            letter-spacing: -4px;
            pointer-events: none;
            text-transform: uppercase;
        }
        .shop-hero-subnav {
            position: absolute;
            bottom: 18px; left: 50%;
            transform: translateX(-50%);
            display: flex; align-items: center; gap: 10px;
            background: rgba(255,255,255,.12);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,.22);
            border-radius: 100px;
            padding: 6px 18px 6px 6px;
            font-size: 11.5px; letter-spacing: .6px;
            color: rgba(255,255,255,.85);
            white-space: nowrap;
        }
        .shop-hero-pill {
            background: #fff; color: #111;
            border-radius: 100px; padding: 3px 14px;
            font-size: 11px; font-weight: 700; letter-spacing: 1px;
        }

        /* Section */
        .shop-section { padding: 32px 0 0; }
        .shop-section-title {
            font-size: clamp(20px, 3.5vw, 32px);
            font-weight: 800; letter-spacing: -1px;
            margin-bottom: 18px; color: var(--black);
        }

        /* Product grid */
        .shop-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px; align-items: start;
        }
        .shop-card { display: flex; flex-direction: column; gap: 7px; }

        .shop-card-img-wrap {
            position: relative;
            border-radius: var(--r);
            overflow: hidden;
            background: var(--g1);
        }
        .shop-card-img-wrap img {
            width: 100%; height: 100%;
            object-fit: cover; display: block;
            transition: transform .45s ease;
        }
        .shop-card:hover .shop-card-img-wrap img { transform: scale(1.04); }

        /* Staggered heights */
        .shop-card--short  .shop-card-img-wrap { aspect-ratio: 1 / 1; }
        .shop-card--mid    .shop-card-img-wrap { aspect-ratio: 3 / 4; }
        .shop-card--tall   .shop-card-img-wrap { aspect-ratio: 2 / 3; }

        .shop-card-heart {
            position: absolute; top: 10px; right: 10px;
            width: 28px; height: 28px;
            background: rgba(255,255,255,.88);
            border-radius: 50%; border: none; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 13px; z-index: 2;
            transition: transform .15s, background .15s;
        }
        .shop-card-heart:hover { transform: scale(1.18); background: #fff; }

        .shop-card-info {
            display: flex; justify-content: space-between;
            align-items: baseline; gap: 4px; padding: 0 2px;
        }
        .shop-card-name {
            font-size: 9px; font-weight: 600;
            letter-spacing: 2px; text-transform: uppercase;
            color: var(--black);
        }
        .shop-card-price {
            font-size: 11px; font-weight: 400;
            color: var(--muted); white-space: nowrap;
        }

        /* BUY NOW */
        .shop-buy-row { display: flex; justify-content: flex-end; padding: 22px 0 0; }
        .shop-buy-now {
            font-size: clamp(20px, 3vw, 30px);
            font-weight: 800; letter-spacing: -1px;
            color: var(--black); text-decoration: none;
            border-bottom: 2px solid var(--black);
            padding-bottom: 2px;
            transition: color .15s, border-color .15s;
        }
        .shop-buy-now:hover { color: var(--green); border-color: var(--green); }

        /* Editorial images at bottom */
        .shop-editorial {
            display: grid;
            grid-template-columns: 1fr 1.55fr;
            gap: 12px; padding: 32px 0 52px;
        }
        .shop-edit-img {
            border-radius: var(--r); overflow: hidden;
            aspect-ratio: 3/4; background: var(--g1);
        }
        .shop-edit-img img {
            width: 100%; height: 100%;
            object-fit: cover; display: block;
        }

        /* Mobile */
        @media (max-width: 900px) {
            .shop-hero { width: calc(100% + 16px); margin-left: -8px; height: 46vh; }
            .shop-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
            .shop-editorial { grid-template-columns: 1fr 1fr; gap: 10px; }
        }
        @media (max-width: 600px) {
            .shop-hero { width: calc(100% + 12px); margin-left: -6px; height: 42vh; min-height: 280px; }
            .shop-hero-brand { font-size: clamp(44px, 13vw, 80px); bottom: 48px; }
            .shop-hero-subnav { font-size: 10px; padding: 5px 12px 5px 5px; }
        }

        /* ── CONTACT ──────────────────────────────────────────────── */
        .contact-wrap {
            max-width: 480px;
            margin: 0 auto;
            padding: 0 20px;
            min-height: calc(100vh - var(--nav-h));
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .contact-wrap h2 {
            font-size: 32px;
            font-weight: 300;
            letter-spacing: -1px;
            margin-bottom: 32px;
            text-align: center;
        }
        .contact-form { display: flex; flex-direction: column; gap: 20px; }

        .form-field input,
        .form-field textarea {
            width: 100%;
            padding: 14px 0;
            background: transparent;
            border: none;
            border-bottom: 1.5px solid var(--g2);
            font-size: 16px;
            font-family: var(--font);
            color: var(--black);
            outline: none;
            transition: border-color .2s;
        }
        .form-field input:focus,
        .form-field textarea:focus { border-bottom-color: var(--black); }
        .form-field input::placeholder,
        .form-field textarea::placeholder { color: var(--g3); }
        .form-field textarea { resize: vertical; min-height: 120px; }

        .submit-btn {
            align-self: center;
            padding: 14px 36px;
            background: var(--black);
            color: #fff;
            border: none;
            border-radius: 30px;
            font-size: 14px;
            font-weight: 500;
            letter-spacing: .5px;
            transition: background .2s, transform .2s;
            margin-top: 8px;
        }
        .submit-btn:hover { background: var(--green); color: #000; transform: translateY(-2px); }


        /* ── TOAST ────────────────────────────────────────────────── */
        .toast-area {
            position: fixed;
            top: 86px; right: 18px;
            z-index: 6000;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .toast {
            background: var(--green);
            color: #fff;
            padding: 13px 18px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 9px;
            font-size: 14px;
            font-weight: 600;
            min-width: 200px;
            box-shadow: 0 8px 28px rgba(45,213,18,.35);
            animation: toastIn .3s cubic-bezier(.34,1.56,.64,1);
        }
        .toast.out { animation: toastOut .25s ease forwards; }
        @keyframes toastIn  { from{opacity:0;transform:translateX(50px)} to{opacity:1;transform:translateX(0)} }
        @keyframes toastOut { to  {opacity:0;transform:translateX(50px)} }

        /* ── BACK TO TOP ──────────────────────────────────────────── */
        .back-top {
            position: fixed;
            bottom: 28px; right: 28px;
            width: 46px; height: 46px;
            background: #fff;
            border: 1px solid var(--g2);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 16px rgba(0,0,0,.1);
            opacity: 0; visibility: hidden;
            transform: translateY(10px);
            transition: all .3s cubic-bezier(.34,1.56,.64,1);
            z-index: 900;
            color: var(--black);
        }
        .back-top.show { opacity: 1; visibility: visible; transform: translateY(0); }
        .back-top:hover { background: var(--green); color: #000; transform: translateY(-4px); }

        @media (max-width: 768px) { .back-top { bottom: 18px; right: 18px; } }

        /* ── LOADER ──────────────────────────────────────────────── */
        .loader {
            position: fixed; inset: 0;
            background: #000;
            z-index: 99999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', Courier, monospace;
            color: #fff;
            transition: opacity .8s ease, visibility .8s ease;
        }
        .loader.done { opacity: 0; visibility: hidden; pointer-events: none; }

        .ldr-inner { width: min(480px, 88vw); }

        .ldr-brand {
            font-size: 10px;
            letter-spacing: 4px;
            color: rgba(255,255,255,.3);
            margin-bottom: 40px;
            text-transform: uppercase;
        }

        .ldr-divider {
            height: 1px;
            background: rgba(255,255,255,.1);
            margin-bottom: 32px;
        }

        .ldr-lines {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 44px;
        }
        .ldr-line {
            font-size: 10px;
            letter-spacing: 2px;
            color: rgba(255,255,255,.35);
            display: flex;
            gap: 10px;
            opacity: 0;
            transition: opacity .5s ease;
        }
        .ldr-line.show { opacity: 1; }
        .ldr-prompt { color: #2DD512; }

        .ldr-counter-row {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 10px;
        }
        .ldr-status-txt {
            font-size: 9px;
            letter-spacing: 2.5px;
            color: rgba(255,255,255,.35);
        }
        .ldr-count-num {
            font-size: 52px;
            font-weight: 700;
            letter-spacing: -3px;
            line-height: 1;
            color: #fff;
            font-variant-numeric: tabular-nums;
        }
        .ldr-pct { font-size: 18px; color: rgba(255,255,255,.35); }

        .ldr-track {
            height: 1px;
            background: rgba(255,255,255,.08);
            position: relative;
            overflow: visible;
        }
        .ldr-fill {
            position: absolute;
            top: 0; left: 0;
            height: 100%;
            width: 0%;
            background: #fff;
            transition: width .12s ease-out;
        }
        .ldr-bottom {
            display: flex;
            justify-content: space-between;
            margin-top: 18px;
            font-size: 8px;
            letter-spacing: 2px;
            color: rgba(255,255,255,.18);
            text-transform: uppercase;
        }

        /* ── HERO / RAVISAUCE LAB ────────────────────────────────── */
        .hero {
            position: relative;
            height: 100vh;
            height: 100svh;
            margin-top: calc(-1 * (var(--nav-h) + 4px));
            margin-left: -18px;
            margin-right: -18px;
            overflow: hidden;
            background: #060606;
            background-image: radial-gradient(circle, rgba(255,255,255,.032) 1px, transparent 1px);
            background-size: 28px 28px;
            font-family: 'Courier New', Courier, monospace;
        }

        /* ── PANELS ── */
        .hud-panel {
            position: absolute;
            overflow: hidden;
            background: #0c0c0c;
            border: 1px solid rgba(255,255,255,.09);
            border-radius: var(--r);
            box-shadow: 0 0 0 1px rgba(255,255,255,.04), 0 24px 64px rgba(0,0,0,.75);
        }
        /* Panel positions set by JS on desktop */

        /* ── PANEL VIDEOS ── */
        .hud-vid {
            position: absolute;
            top: -5%; left: -5%;
            width: 110%; height: 110%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 1.6s ease;
        }
        .hud-vid.playing { opacity: 1; }
        .hud-vid-main { object-position: 50% 40%; }
        .hud-vid-pa   { object-position: 20% 30%; }
        .hud-vid-pb   { object-position: 70% 20%; }
        .hud-vid-pc   { object-position: 80% 65%; }
        .hud-vid-pd   { object-position: 35% 75%; }

        /* ── SCAN LINE (moves top → bottom, different timing per panel) ── */
        @keyframes scan {
            0%   { top: -2px; opacity: 0; }
            4%   { opacity: 1; }
            96%  { opacity: .5; }
            100% { top: 100%; opacity: 0; }
        }
        .scan-line {
            position: absolute;
            left: 0; right: 0; top: 0;
            height: 1px;
            background: linear-gradient(to right, transparent 0%, rgba(45,213,18,.2) 50%, transparent 100%);
            animation: scan 7s linear infinite;
            pointer-events: none;
            z-index: 6;
        }
        .hud-pa   .scan-line { animation-delay:  0s;    }
        .hud-pb   .scan-line { animation-delay: -1.4s;  }
        .hud-pc   .scan-line { animation-delay: -3.5s;  }
        .hud-pd   .scan-line { animation-delay: -5.1s;  }
        .hud-pe   .scan-line { animation-delay: -4.2s;  }
        .hud-pf   .scan-line { animation-delay: -6.3s;  }
        .hud-main .scan-line { animation-delay: -2.6s;  }

        /* ── PANEL UI LAYER (corners, label, specimen tag) ── */
        .panel-ui {
            position: absolute; inset: 0;
            pointer-events: none; z-index: 7;
        }
        .p-corner { display: none; }
        .hud-spec { display: none; }
        .panel-label {
            position: absolute;
            bottom: 0; left: 0; right: 0;
            height: 28px;
            background: rgba(0,0,0,.65);
            backdrop-filter: blur(8px);
            border-top: 1px solid rgba(255,255,255,.06);
            display: flex; align-items: center;
            padding: 0 9px; gap: 7px;
        }
        .pl-dot {
            width: 5px; height: 5px;
            background: var(--green); border-radius: 50%;
            animation: pulse 1.8s ease-in-out infinite;
            flex-shrink: 0;
        }
        .pl-id   { font-size: 7px; letter-spacing: 2px; color: rgba(255,255,255,.4); }
        .pl-time { margin-left: auto; font-size: 7px; letter-spacing: 1px; color: rgba(255,255,255,.22); }

        /* ── SCREEN CORNER COORDS ── */
        .hud-corner    { display: none; }
        .hud-circle {
            width: 12px; height: 12px;
            border: 1px solid rgba(255,255,255,.22); border-radius: 50%; flex-shrink: 0;
        }
        .hud-xbox {
            width: 12px; height: 12px;
            border: 1px solid rgba(255,255,255,.22);
            position: relative; flex-shrink: 0;
        }
        .hud-xbox::before, .hud-xbox::after {
            content: ''; position: absolute; top: 50%; left: 50%;
            width: 6px; height: 1px; background: rgba(255,255,255,.28);
        }
        .hud-xbox::before { transform: translate(-50%,-50%) rotate(45deg); }
        .hud-xbox::after  { transform: translate(-50%,-50%) rotate(-45deg); }

        /* ── METADATA TEXT ── */
        .hud-meta { display: none; }

        /* ── SIDEBAR ── */
        .hud-sidebar {
            position: absolute; left: 2%; bottom: 12vh;
            font-size: 7.5px; letter-spacing: 1.5px; line-height: 2.1;
            color: rgba(255,255,255,.2);
            pointer-events: none; z-index: 0;
        }
        .hud-sidebar-sep { opacity: .2; }

        /* ── AMBIENT LAB TEXT ── */
        .hud-ambient {
            position: absolute;
            font-family: 'Courier New', Courier, monospace;
            font-size: 7px; letter-spacing: 1.5px; line-height: 2;
            color: rgba(255,255,255,.15);
            pointer-events: none; z-index: 0;
            text-transform: uppercase;
        }
        .hud-amb-g   { color: rgba(45,213,18,.30); }
        .hud-amb-sep { opacity: .25; display: block; margin: 2px 0; }
        /* Left-side only — both start below the nav bar */
        .hud-amb-tl  { top: calc(var(--nav-h) + 10px); left: 2%; }
        .hud-amb-ml  { top: 50%; left: 2%; transform: translateY(-50%); }

        /* ── STORY BACKGROUND TEXT ── */
        .hud-story {
            position: absolute;
            top: calc(var(--nav-h) + 6px);
            left: 0; right: 0;
            bottom: 8vh;
            overflow: hidden;
            font-family: 'Courier New', Courier, monospace;
            font-size: 6.5px;
            letter-spacing: 1.2px;
            line-height: 2.6;
            color: rgba(255,255,255,.048);
            pointer-events: none;
            z-index: 0;
            text-transform: uppercase;
            padding: 0 2%;
            column-count: 3;
            column-gap: 2%;
        }

        /* ── CORNER X DECO ── */
        .hud-x-deco {
            position: absolute; width: 16px; height: 16px;
            border: 1px solid rgba(255,255,255,.1);
            display: flex; align-items: center; justify-content: center;
            font-size: 7px; color: rgba(255,255,255,.14);
            pointer-events: none; z-index: 0;
        }
        .hud-x-bl { left: 2%;  bottom: calc(7vh + 3px); }
        .hud-x-br { right: 3%; bottom: calc(7vh + 3px); }

        /* ── BOTTOM STATUS BAR ── */
        .hud-bar {
            position: absolute; bottom: 0; left: 0; right: 0;
            height: 7vh; max-height: 52px; min-height: 38px;
            display: flex; align-items: center;
            border-top: 1px solid rgba(255,255,255,.07);
            font-size: 8.5px; letter-spacing: 2px; overflow: hidden;
            background: rgba(4,4,4,.9); backdrop-filter: blur(12px);
            z-index: 10;
        }
        .hud-bar-seg {
            height: 100%; display: flex; align-items: center;
            padding: 0 18px; border-right: 1px solid rgba(255,255,255,.06);
            white-space: nowrap; color: rgba(255,255,255,.35);
        }
        .hud-bar-path    { color: rgba(255,255,255,.25); }
        .hud-bar-plus    { color: rgba(255,255,255,.14); padding: 0 10px; }
        .hud-bar-project { color: rgba(255,255,255,.62); flex: 1; letter-spacing: 2.5px; }
        .hud-bar-tags    { color: rgba(255,255,255,.2); }
        .hud-bar-next    { color: rgba(255,255,255,.35); }
        .hud-bar-count   { color: rgba(255,255,255,.22); border-right: none; }
        .hud-plus        { display: none; }

        /* ── DESKTOP DRAG HINT ── */
        @media (hover: hover) and (min-width: 901px) {
            .hud-panel { cursor: grab; transition: box-shadow .2s; }
            .hud-panel.dragging { cursor: grabbing; box-shadow: 0 0 0 2px rgba(255,255,255,.2), 0 32px 80px rgba(0,0,0,.9); transition: none; }
        }

        /* ── RESIZE HANDLES ── */
        .resize-handle {
            position: absolute; width: 18px; height: 18px;
            z-index: 9; background: transparent;
        }
        .resize-handle::after {
            content: '';
            position: absolute;
            width: 7px; height: 7px;
        }
        .resize-handle[data-dir="se"] { bottom: 0; right: 0; cursor: se-resize; }
        .resize-handle[data-dir="se"]::after {
            bottom: 4px; right: 4px;
            border-right: 2px solid rgba(255,255,255,.7);
            border-bottom: 2px solid rgba(255,255,255,.7);
            border-radius: 0 0 2px 0;
        }
        .resize-handle[data-dir="sw"] { bottom: 0; left: 0; cursor: sw-resize; }
        .resize-handle[data-dir="sw"]::after {
            bottom: 4px; left: 4px;
            border-left: 2px solid rgba(255,255,255,.7);
            border-bottom: 2px solid rgba(255,255,255,.7);
            border-radius: 0 0 0 2px;
        }
        .resize-handle[data-dir="ne"] { top: 0; right: 0; cursor: ne-resize; }
        .resize-handle[data-dir="ne"]::after {
            top: 4px; right: 4px;
            border-right: 2px solid rgba(255,255,255,.7);
            border-top: 2px solid rgba(255,255,255,.7);
            border-radius: 0 2px 0 0;
        }
        .resize-handle[data-dir="nw"] { top: 0; left: 0; cursor: nw-resize; }
        .resize-handle[data-dir="nw"]::after {
            top: 4px; left: 4px;
            border-left: 2px solid rgba(255,255,255,.7);
            border-top: 2px solid rgba(255,255,255,.7);
            border-radius: 2px 0 0 0;
        }
        /* Only show handles when hovering the panel */
        .hud-panel .resize-handle { opacity: 0; transition: opacity .2s; }
        .hud-panel:hover .resize-handle { opacity: 1; }

        /* ── MOBILE ── */
        @media (max-width: 900px) {
            /* pa + pb + main are positioned by JS; hide the rest */
            .hud-pc, .hud-pd, .hud-pe, .hud-pf,
            .hud-sidebar, .hud-x-bl, .hud-x-br,
            .hud-ambient, .hud-story { display: none; }
        }
        @media (max-width: 600px) {
            .hud-bar-tags, .hud-bar-count { display: none; }
            .hud-bar-seg { font-size: 7px; padding: 0 10px; letter-spacing: 1px; }
        }

        /* ── HEADER OVER DARK HERO ─────────────────────────────── */
        .header.hero-mode {
            background: transparent !important;
            border-bottom-color: transparent !important;
            box-shadow: none !important;
        }
        .header.hero-mode .logo img       { filter: brightness(0) invert(1); }
        .header.hero-mode .nav-tab        { color: rgba(255,255,255,.55); }
        .header.hero-mode .nav-tab:hover  { background: rgba(255,255,255,.1); color: #fff; }
        .header.hero-mode .nav-tab.active { background: rgba(255,255,255,.18); color: #fff; }
        .header.hero-mode .h-line         { background: #fff; }

        /* ══════════════════════════════════════════════════════
           DARK MODE — entire site
        ══════════════════════════════════════════════════════ */
        body             { background: #0a0a0a; color: #d0d0d0; }

        .header          { background: #0a0a0a; border-bottom-color: #1c1c1c; }
        .header.scrolled { background: rgba(8,8,8,.97); box-shadow: 0 1px 16px rgba(0,0,0,.6); border-bottom-color: transparent; }

        .nav-tab          { color: #555; }
        .nav-tab:hover    { background: #1a1a1a; color: #d0d0d0; }
        .nav-tab.active   { background: #d0d0d0; color: #0a0a0a; }

        .h-line           { background: #d0d0d0; }

        .pin {
            background: linear-gradient(90deg, #181818 25%, #212121 50%, #181818 75%);
            background-size: 200% 100%;
        }
        .pin.loaded { background: none; animation: none; }

        .coming-soon h1 { color: #d0d0d0; }
        .coming-soon p  { color: #555; }
        .cs-bar-wrap    { background: #1a1a1a; }
        .cs-hint        { color: #333; }

        .shop-section-title { color: #d0d0d0; }
        .shop-card-name     { color: #d0d0d0; }
        .shop-card-img-wrap { background: #1a1a1a; }
        .shop-edit-img      { background: #1a1a1a; }
        .shop-buy-now       { color: #d0d0d0; border-bottom-color: #d0d0d0; }
        .shop-buy-now:hover { color: var(--green); border-color: var(--green); }

        .contact-wrap h2 { color: #d0d0d0; }
        .form-field input, .form-field textarea { color: #d0d0d0; border-bottom-color: #2a2a2a; }
        .form-field input:focus, .form-field textarea:focus { border-bottom-color: #555; }
        .form-field input::placeholder, .form-field textarea::placeholder { color: #3a3a3a; }
        .submit-btn       { background: #d0d0d0; color: #0a0a0a; }
        .submit-btn:hover { background: var(--green); color: #000; }

        .saved-empty h3   { color: #d0d0d0; }
        .saved-empty p    { color: #555; }
        .browse-link      { background: #d0d0d0; color: #0a0a0a; }
        .browse-link:hover { background: var(--green); color: #000; }

        .back-top         { background: #111; border-color: #222; color: #d0d0d0; }
        .back-top:hover   { background: var(--green); color: #000; }
    </style>
</head>
<body>

<!-- LOADER -->
<div id="loader" class="loader">
    <div class="ldr-inner">
        <div class="ldr-brand">RaviSauce &nbsp;—&nbsp; Creative Studio</div>
        <div class="ldr-divider"></div>
        <div class="ldr-lines">
            <div class="ldr-line" id="ldr-l1"><span class="ldr-prompt">›</span><span>SYSTEM BOOT INITIATED</span></div>
            <div class="ldr-line" id="ldr-l2"><span class="ldr-prompt">›</span><span>LOADING CREATIVE ASSETS</span></div>
            <div class="ldr-line" id="ldr-l3"><span class="ldr-prompt">›</span><span>MOUNTING INTERFACE</span></div>
        </div>
        <div class="ldr-counter-row">
            <span class="ldr-status-txt" id="ldr-status">INITIALIZING</span>
            <div><span class="ldr-count-num" id="ldr-count">000</span><span class="ldr-pct">%</span></div>
        </div>
        <div class="ldr-track"><div class="ldr-fill" id="ldr-fill"></div></div>
        <div class="ldr-bottom">
            <span>RS — LABS</span>
            <span id="ldr-date"></span>
        </div>
    </div>
</div>

<!-- HEADER -->
<header class="header" id="header">
    <div class="logo-wrap">
        <button class="logo" onclick="showPage('home')" aria-label="Home">
            <img src="https://i.imgur.com/CsYuIfd.png" alt="Ravi Sauce">
        </button>
    </div>

    <nav class="nav-tabs">
        <button class="nav-tab active" data-page="home"    onclick="showPage('home')">Home</button>
        <button class="nav-tab"        data-page="saved"   onclick="showPage('saved')">Saved</button>
        <button class="nav-tab"        data-page="shop"    onclick="showPage('shop')">Shop</button>
        <button class="nav-tab"        data-page="contact" onclick="showPage('contact')">Contact</button>
    </nav>

    <button class="mobile-toggle" id="mob-toggle" onclick="openMobileMenu()" aria-label="Menu">
        <span class="h-line"></span>
        <span class="h-line"></span>
        <span class="h-line"></span>
    </button>
</header>

<!-- MOBILE MENU -->
<div class="mob-menu" id="mob-menu">
    <div class="mob-head">
        <span class="mob-id">RAV — ACCESS</span>
        <button class="mob-close" onclick="closeMobileMenu()" aria-label="Close">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
                <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        </button>
    </div>
    <div class="mob-items">
        <button class="mob-item" data-page="home"    onclick="mobileNav('home')">   <span class="mob-num">01</span><span class="mob-label">HOME</span></button>
        <button class="mob-item" data-page="saved"   onclick="mobileNav('saved')">  <span class="mob-num">02</span><span class="mob-label">SAVED</span></button>
        <button class="mob-item" data-page="shop"    onclick="mobileNav('shop')">   <span class="mob-num">03</span><span class="mob-label">SHOP</span></button>
        <button class="mob-item" data-page="contact" onclick="mobileNav('contact')"><span class="mob-num">04</span><span class="mob-label">CONTACT</span></button>
    </div>
    <div class="mob-foot">
        <div class="mob-status"><span class="status-dot"></span><span>SYSTEM ONLINE</span></div>
        <span style="font-size:10px;color:#444;font-family:'Courier New',monospace;">THE MOON</span>
    </div>
</div>
<div class="mob-backdrop" id="mob-backdrop" onclick="closeMobileMenu()"></div>

<!-- MAIN -->
<main class="main">

    <!-- HOME -->
    <div id="home-page" class="page active">

        <!-- RAVISAUCE LAB — HERO -->
        <div class="hero" id="hero-section">

            <!-- ── PANEL PA ── -->
            <div class="hud-panel hud-pa">
                <video autoplay muted loop playsinline class="hud-vid hud-vid-pa">
                    <source src="videos/flag-loop.mp4?feed=a" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—A</span>
                    </div>
                </div>
            </div>

            <!-- ── PANEL PB ── -->
            <div class="hud-panel hud-pb">
                <video autoplay muted loop playsinline class="hud-vid hud-vid-pb">
                    <source src="videos/rock-loop.mp4?feed=b" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—B</span>
                    </div>
                </div>
            </div>

            <!-- ── PANEL PC ── -->
            <div class="hud-panel hud-pc">
                <video autoplay muted loop playsinline class="hud-vid hud-vid-pc">
                    <source src="videos/astro-final.mp4?feed=c" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—C</span>
                    </div>
                </div>
            </div>

            <!-- ── PANEL PD ── -->
            <div class="hud-panel hud-pd">
                <video autoplay muted loop playsinline class="hud-vid hud-vid-pd">
                    <source src="videos/animation-reel.mp4?feed=d" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—D</span>
                    </div>
                </div>
            </div>

            <!-- ── PANEL PE ── -->
            <div class="hud-panel hud-pe">
                <video autoplay muted loop playsinline class="hud-vid hud-vid-pe">
                    <source src="videos/rock-loop.mp4?feed=e" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—E</span>
                    </div>
                </div>
            </div>

            <!-- ── PANEL PF ── -->
            <div class="hud-panel hud-pf">
                <video autoplay muted loop playsinline class="hud-vid hud-vid-pf">
                    <source src="videos/astro-final.mp4?feed=f" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—F</span>
                    </div>
                </div>
            </div>

            <!-- ── PANEL MAIN ── -->
            <div class="hud-panel hud-main">
                <video class="hud-vid hud-vid-main" id="hero-video" autoplay muted loop playsinline preload="auto">
                    <source src="videos/animation-reel.mp4" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—MAIN / PRIMARY FEED</span>
                    </div>
                </div>
            </div>

            <!-- STORY BACKGROUND FILL TEXT -->
            <div class="hud-story">RAVI SAUCE IS SEARCHING FOR THE HIDDEN CODE OF THE UNIVERSE — THROUGH EXPERIMENTATION WITH DIFFERENT FABRICS, MATERIALS, AND MEDIUMS — CREATING SOMETHING SO UNBELIEVABLY EXTRAORDINARY THAT IT TRANSCENDS THE ORDINARY — A CURIOUS EXPLORER AT THE INTERSECTION OF NATURE AND SCIENCE — THE FIBONACCI SPIRAL LIVES IN EVERY LEAF, EVERY GALAXY, EVERY FINGERPRINT — THE GOLDEN RATIO φ = 1.618 APPEARS IN THE ARCHITECTURE OF EVERYTHING BEAUTIFUL — OBSERVING, QUESTIONING, TRANSLATING THE INVISIBLE LANGUAGE OF THE UNIVERSE INTO SOMETHING TANGIBLE — SOMETHING YOU CAN FEEL — SOMETHING YOU CAN SEE — SOMETHING YOU CAN WEAR — THE HIDDEN CODE IS ALREADY HERE — WE ARE JUST LEARNING TO READ IT — THE UNIVERSE WRITES IN MATHEMATICS AND WE ARE LEARNING ITS ALPHABET — FROM THE SPIRAL OF A NAUTILUS TO THE ARMS OF A GALAXY — FROM THE BRANCHING OF A TREE TO THE HELIX OF DNA — THE SAME PATTERN REPEATS AT EVERY SCALE — NATURE IS THE ORIGINAL DESIGNER — RAVI SAUCE IS THE STUDENT — THE OBSERVER — THE TRANSLATOR — CURIOUS ABOUT WHAT LIES BENEATH THE SURFACE OF THINGS — WHAT CONNECTS THE MACRO TO THE MICRO — WHAT MAKES SOMETHING EXTRAORDINARY — THE ANSWER IS PATTERN — REPETITION — PROPORTION — THE UNIVERSE COMPUTES ITSELF THROUGH GEOMETRY AND WE ARE HERE TO WITNESS IT — AND TO CREATE — /// RAVI SAUCE IS SEARCHING FOR THE HIDDEN CODE OF THE UNIVERSE — THROUGH EXPERIMENTATION WITH DIFFERENT FABRICS, MATERIALS, AND MEDIUMS — CREATING SOMETHING SO UNBELIEVABLY EXTRAORDINARY THAT IT TRANSCENDS THE ORDINARY — A CURIOUS EXPLORER AT THE INTERSECTION OF NATURE AND SCIENCE — THE FIBONACCI SPIRAL LIVES IN EVERY LEAF, EVERY GALAXY, EVERY FINGERPRINT — THE GOLDEN RATIO φ = 1.618 APPEARS IN THE ARCHITECTURE OF EVERYTHING BEAUTIFUL — OBSERVING, QUESTIONING, TRANSLATING THE INVISIBLE LANGUAGE OF THE UNIVERSE INTO SOMETHING TANGIBLE — SOMETHING YOU CAN FEEL — SOMETHING YOU CAN SEE — SOMETHING YOU CAN WEAR — THE HIDDEN CODE IS ALREADY HERE — WE ARE JUST LEARNING TO READ IT — THE UNIVERSE WRITES IN MATHEMATICS AND WE ARE LEARNING ITS ALPHABET — FROM THE SPIRAL OF A NAUTILUS TO THE ARMS OF A GALAXY — FROM THE BRANCHING OF A TREE TO THE HELIX OF DNA — THE SAME PATTERN REPEATS AT EVERY SCALE — NATURE IS THE ORIGINAL DESIGNER — RAVI SAUCE IS THE STUDENT — THE OBSERVER — THE TRANSLATOR — CURIOUS ABOUT WHAT LIES BENEATH THE SURFACE OF THINGS — WHAT CONNECTS THE MACRO TO THE MICRO — WHAT MAKES SOMETHING EXTRAORDINARY — THE ANSWER IS PATTERN — REPETITION — PROPORTION — THE UNIVERSE COMPUTES ITSELF THROUGH GEOMETRY AND WE ARE HERE TO WITNESS IT — AND TO CREATE — /// RAVI SAUCE IS SEARCHING FOR THE HIDDEN CODE OF THE UNIVERSE — THROUGH EXPERIMENTATION WITH DIFFERENT FABRICS, MATERIALS, AND MEDIUMS — CREATING SOMETHING SO UNBELIEVABLY EXTRAORDINARY THAT IT TRANSCENDS THE ORDINARY — A CURIOUS EXPLORER AT THE INTERSECTION OF NATURE AND SCIENCE — THE FIBONACCI SPIRAL LIVES IN EVERY LEAF, EVERY GALAXY, EVERY FINGERPRINT — THE GOLDEN RATIO φ = 1.618 APPEARS IN THE ARCHITECTURE OF EVERYTHING BEAUTIFUL — OBSERVING, QUESTIONING, TRANSLATING THE INVISIBLE LANGUAGE OF THE UNIVERSE INTO SOMETHING TANGIBLE — SOMETHING YOU CAN FEEL — SOMETHING YOU CAN SEE — SOMETHING YOU CAN WEAR — THE HIDDEN CODE IS ALREADY HERE — WE ARE JUST LEARNING TO READ IT — THE UNIVERSE WRITES IN MATHEMATICS AND WE ARE LEARNING ITS ALPHABET — FROM THE SPIRAL OF A NAUTILUS TO THE ARMS OF A GALAXY — FROM THE BRANCHING OF A TREE TO THE HELIX OF DNA — THE SAME PATTERN REPEATS AT EVERY SCALE — NATURE IS THE ORIGINAL DESIGNER — RAVI SAUCE IS THE STUDENT — THE OBSERVER — THE TRANSLATOR — CURIOUS ABOUT WHAT LIES BENEATH THE SURFACE OF THINGS — WHAT CONNECTS THE MACRO TO THE MICRO — WHAT MAKES SOMETHING EXTRAORDINARY — THE ANSWER IS PATTERN — REPETITION — PROPORTION — THE UNIVERSE COMPUTES ITSELF THROUGH GEOMETRY AND WE ARE HERE TO WITNESS IT — AND TO CREATE —</div>

            <!-- AMBIENT LAB TEXT — left side only -->

            <!-- Top-left: identity -->
            <div class="hud-ambient hud-amb-tl">
                RAVISAUCE LABORATORIES<br>
                <span class="hud-amb-sep">───────────────────</span>
                CURIOSITY &nbsp;: [INFINITE]<br>
                SIGNAL &nbsp;&nbsp;&nbsp;&nbsp;: NATURE + ART<br>
                EST &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 2026 — EARTH
            </div>

            <!-- Mid-left: nature / fibonacci / philosophy -->
            <div class="hud-ambient hud-amb-ml">
                <span class="hud-amb-sep">— φ = 1.6180339887 —</span>
                GOLDEN RATIO<br>
                <br>
                FIBONACCI SEQUENCE<br>
                <span class="hud-amb-g">0, 1, 1, 2, 3, 5, 8, 13</span><br>
                <span class="hud-amb-g">21, 34, 55, 89 → ∞</span><br>
                <br>
                <span class="hud-amb-sep">— FOUND IN —</span>
                SHELLS &nbsp;/ GALAXIES<br>
                TREES &nbsp;&nbsp;/ DNA / YOU<br>
                <br>
                <span class="hud-amb-sep">———————————</span>
                WHAT EXISTS IS<br>
                <span class="hud-amb-g">WAITING TO BE NOTICED</span>
            </div>

            <!-- SCREEN CORNER COORDS -->
            <div class="hud-corner hud-corner-tl">
                <span>X:0166PX &nbsp;Y:0079PX</span>
                <div class="hud-circle"></div>
            </div>
            <div class="hud-corner hud-corner-tr">
                <div class="hud-xbox"></div>
                <span>X:0916PX &nbsp;Y:0077PX</span>
            </div>

            <!-- METADATA TEXT -->
            <div class="hud-meta">
                VIDEO ID / RSL 2026 / ANIMATION REEL / 5-CAM ARRAY<br>
                FRAMES 1920×1080 @ 30FPS / DROPPED 0 OF 4096<br>
                OPTIMAL RES 1920×1080@30 / 3840×2160@25<br>
                NORMALIZED 100% / LOUDNESS -25.9DB / CODEC H264
            </div>

            <!-- SIDEBAR -->
            <div class="hud-sidebar">
                <div>DATE &nbsp;: [2026.02.24]</div>
                <div>HOUR &nbsp;: [<span id="hud-clock">00:00:00</span>]</div>
                <div>FEEDS ACTIVE : [05/05]</div>
                <div class="hud-sidebar-sep">— — —</div>
                <div>DISPLAY &nbsp;: (1920×1080 @ 60HZ)</div>
                <div>LANGUAGE : [ENGLISH]</div>
            </div>

            <!-- CORNER X DECO -->
            <div class="hud-x-deco hud-x-bl">✕</div>
            <div class="hud-x-deco hud-x-br">✕</div>

            <!-- BOTTOM STATUS BAR -->
            <div class="hud-bar">
                <div class="hud-bar-seg hud-bar-path">C:\RAVISAUCE \HOME</div>
                <div class="hud-bar-seg hud-bar-plus">+</div>
                <div class="hud-bar-seg hud-bar-project">ANIMATION_REEL_2026</div>
                <div class="hud-bar-seg hud-bar-tags">PHOTOGRAPHY, MOTION, DESIGN</div>
                <div class="hud-bar-seg hud-bar-next">SCROLL &nbsp;↓</div>
                <div class="hud-bar-seg hud-bar-count">001/005</div>
            </div>

        </div>

        <div class="masonry-grid" id="home-grid"></div>
    </div>

    <!-- SAVED -->
    <div id="saved-page" class="page">
        <div class="masonry-grid" id="saved-grid"></div>
        <div class="saved-empty" id="saved-empty" style="display:none;">
            <div class="saved-empty-icon">📌</div>
            <h3>Nothing saved yet</h3>
            <p>Tap Save on any image to start your collection.</p>
            <a href="#" class="browse-link" onclick="showPage('home');return false;">Browse Work</a>
        </div>
    </div>

    <!-- SHOP -->
    <div id="shop-page" class="page">
        <div class="shop-wrap">

            <!-- HERO -->
            <div class="shop-hero">
                <img class="shop-hero-bg" src="images/hero.png" alt="Ravi Sauce">
                <div class="shop-hero-brand">RAVI<br>SAUCE</div>
                <div class="shop-hero-subnav">
                    <span class="shop-hero-pill">RAVI SAUCE</span>
                    Shop &nbsp;|&nbsp; New Collection &nbsp;|&nbsp; About
                </div>
            </div>

            <!-- BESTSELLERS -->
            <div class="shop-section">
                <h2 class="shop-section-title">Bestseller Now</h2>

                <div class="shop-grid">

                    <!-- JACKET — short -->
                    <div class="shop-card shop-card--short">
                        <div class="shop-card-img-wrap">
                            <img src="images/RaviPuffer.png" alt="Puffer Jacket" loading="lazy">
                            <button class="shop-card-heart" aria-label="Save">♡</button>
                        </div>
                        <div class="shop-card-info">
                            <span class="shop-card-name">JACKET</span>
                            <span class="shop-card-price">$299</span>
                        </div>
                    </div>

                    <!-- HOODIE — tall, centerpiece -->
                    <div class="shop-card shop-card--tall">
                        <div class="shop-card-img-wrap">
                            <img src="images/floatingravigrey.png" alt="Hoodie" loading="lazy">
                            <button class="shop-card-heart" aria-label="Save">♡</button>
                        </div>
                        <div class="shop-card-info">
                            <span class="shop-card-name">HOODIE</span>
                            <span class="shop-card-price">$249</span>
                        </div>
                    </div>

                    <!-- TIMEPIECE — mid -->
                    <div class="shop-card shop-card--mid">
                        <div class="shop-card-img-wrap">
                            <img src="images/Watch_AI.png" alt="Timepiece" loading="lazy">
                            <button class="shop-card-heart" aria-label="Save">♡</button>
                        </div>
                        <div class="shop-card-info">
                            <span class="shop-card-name">TIMEPIECE</span>
                            <span class="shop-card-price">$599</span>
                        </div>
                    </div>

                    <!-- WALLET — short -->
                    <div class="shop-card shop-card--short">
                        <div class="shop-card-img-wrap">
                            <img src="images/Wallet_Closed.png" alt="Wallet" loading="lazy">
                            <button class="shop-card-heart" aria-label="Save">♡</button>
                        </div>
                        <div class="shop-card-info">
                            <span class="shop-card-name">WALLET</span>
                            <span class="shop-card-price">$149</span>
                        </div>
                    </div>

                </div><!-- /shop-grid -->

                <div class="shop-buy-row">
                    <a href="#" class="shop-buy-now">BUY NOW→</a>
                </div>
            </div><!-- /shop-section -->

            <!-- EDITORIAL -->
            <div class="shop-editorial">
                <div class="shop-edit-img">
                    <img src="images/woodravi.png" alt="Ravi Sauce" loading="lazy">
                </div>
                <div class="shop-edit-img">
                    <img src="images/RaviOntheMoon.png" alt="Ravi Sauce" loading="lazy">
                </div>
            </div>

        </div><!-- /shop-wrap -->
    </div>

    <!-- CONTACT -->
    <div id="contact-page" class="page">
        <div class="contact-wrap">
            <h2>Get in touch.</h2>
            <form class="contact-form" onsubmit="handleContact(event)">
                <div class="form-field"><input type="text"  placeholder="Name"        required></div>
                <div class="form-field"><input type="email" placeholder="Email"       required></div>
                <div class="form-field"><textarea placeholder="Message..." rows="6"   required></textarea></div>
                <button type="submit" class="submit-btn">Send Message</button>
            </form>
        </div>
    </div>

</main>

<!-- LIGHTBOX -->
<div class="lightbox" id="lightbox" onclick="handleLbClick(event)">

    <!--
        CLOSE BUTTON:
        • position:fixed  → always top-right of viewport, never moves with image
        • display:flex + align/justify:center → SVG is pixel-perfect centered
        • SVG X icon → no font-metric centering issues
    -->
    <button class="lb-close" onclick="closeLightbox()" aria-label="Close">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
    </button>

    <button class="lb-arrow prev" onclick="event.stopPropagation();stepImg(-1)" aria-label="Previous">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
            <polyline points="15 18 9 12 15 6"/>
        </svg>
    </button>

    <div class="lb-img-wrap">
        <img id="lb-img" src="" alt="">
    </div>

    <button class="lb-arrow next" onclick="event.stopPropagation();stepImg(1)" aria-label="Next">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
            <polyline points="9 18 15 12 9 6"/>
        </svg>
    </button>

</div>

<!-- BACK TO TOP -->
<button class="back-top" id="back-top" onclick="window.scrollTo({top:0,behavior:'smooth'})" aria-label="Back to top">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
        <polyline points="18 15 12 9 6 15"/>
    </svg>
</button>

<div class="toast-area" id="toast-area"></div>


<script>
// ── Images ────────────────────────────────────────────────────────
const images = [
    'images/0189C072-9872-48BA-A093-4FFD41447B4B.JPG',
    'images/1 2.png',
    'images/1.png',
    'images/10.png',
    'images/11.jpg',
    'images/12.jpg',
    'images/13.jpg',
    'images/14.png',
    'images/15.png',
    'images/16.jpg',
    'images/17.jpg',
    'images/18.png',
    'images/19.jpg',
    'images/1965C46E-0722-4D66-8850-D802EAB847CD.JPG',
    'images/1Yk2pMpmSLqpmgdTXJTKQJfioag.png',
    'images/2 2.png',
    'images/2.png',
    'images/20.jpg',
    'images/21.jpg',
    'images/22.png',
    'images/23.png',
    'images/265C005B-D5B5-483F-8B7A-BCBB94B24A4B.JPG',
    'images/2DF201E8-D67F-4C90-8F6A-645E5668A758.JPG',
    'images/2E94CE98-B836-4A67-B7F3-99FD04664878.JPG',
    'images/3.png',
    'images/30ZaNwqxShKfMaQERCnXcpdr4w.jpg',
    'images/4.jpg',
    'images/5.jpg',
    'images/57D0F6DB-81B6-42A9-B343-BAF2E10E40F7.JPG',
    'images/6.jpg',
    'images/6OKQK50fY1xbJmbpztnsnPPe3Q.jpg',
    'images/7.png',
    'images/8.png',
    'images/87766649-1597-4EE5-881E-72FE14CB7E57_4_5005_c.jpeg',
    'images/8B3E16D9-2C7F-47EC-B531-8A752DDE50B0.JPG',
    'images/9.jpg',
    'images/9eLuwca92zYxg5FChUBE8wQUBA.jpg',
    'images/BC706918-F0D8-4F55-80CD-4171789BC710.JPG',
    'images/CB3ED415-71B5-48FD-893A-B20AEC71DBC6.JPG',
    'images/GZEe7yq1XrVuLXNoYnqADTPGzbw.jpg',
    'images/Generated Image December 07, 2025 - 4_33PM.jpeg',
    'images/Generated Image February 04, 2026 - 6_46PM (1).jpeg',
    'images/Generated Image February 04, 2026 - 6_50PM.jpeg',
    'images/Generated Image January 06, 2026 - 12_58AM.jpeg',
    'images/Generated Image January 11, 2026 - 9_25PM.jpeg',
    'images/Generated Image January 29, 2026 - 8_36PM.jpeg',
    'images/I0F3qXKQjn1qBbKEE9kot0O5I.jpg',
    'images/IMG_6548.JPG',
    'images/IMG_6556.JPG',
    'images/IMG_6684.JPG',
    'images/IMG_6707.JPG',
    'images/IMG_6725.JPG',
    'images/IMG_6998.JPG',
    'images/IMG_7062.JPG',
    'images/IMG_7084.JPG',
    'images/IMG_7388.JPG',
    'images/IMG_7402.JPG',
    'images/IMG_7492.JPG',
    'images/IMG_7497.jpeg',
    'images/IMG_7506.JPG',
    'images/IMG_7514.JPG',
    'images/IMG_7545.jpg',
    'images/IMG_7552.JPG',
    'images/IMG_7573.JPG',
    'images/IMG_7616.JPG',
    'images/Screenshot 2026-02-24 at 5.37.51\u202fPM.png',
    'images/IMG_7887.WEBP',
    'images/IMG_7888.WEBP',
    'images/IMG_8363.JPG',
    'images/IMG_8370.JPG',
    'images/IMG_8442.JPG',
    'images/IMG_8497.JPG',
    'images/IMG_8518.JPG',
    'images/IMG_8890.JPG',
    'images/IMG_9275.JPG',
    'images/IMG_9361.PNG',
    'images/IMG_9650.JPG',
    'images/IMG_9848.JPG',
    'images/IMG_9943.JPG',
    'images/OmnWIw2vcLOaq8E7hSYpxYtflHE.png',
    'images/QqGEhc9FCcYsA1TRJYgdGr0gfWo.png',
    'images/RaviOntheMoon.png',
    'images/RaviPuffer.png',
    'images/Raviholding chain.PNG',
    'images/SAzg9n9zHIxksO920pos8d2Pfn8.png',
    'images/Side View.png',
    'images/Side.jpeg',
    'images/Wallet_Closed.png',
    'images/Watch_AI.png',
    'images/floatingravigrey.png',
    'images/front.jpeg',
    'images/hero.png',
    'images/mMwQq4s1bMXNTrRLSi4oH9seGM.jpg',
    'images/open.jpeg',
    'images/otherside.jpeg',
    'images/qKIyNE3qFv1YouZ6seU0ZcTzbOk.jpg',
    'images/qqDgYRckqMXkKSR02GaXjUCm5k.png',
    'images/rock4.png',
    'images/rockslide bottom.png',
    'images/snakes in grass.jpeg',
    'images/tGtBnkeGzf076lDqPLRiB6G0ko.png',
    'images/woodravi.png',
];

// ── Helpers ───────────────────────────────────────────────────────
function shuffle(arr) {
    const a = [...arr];
    for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
}

// Random size tier for varied pin heights
const SIZE_TIERS = ['', '', 'sz-s', 'sz-m', 'sz-l', 'sz-xl'];
function randomSize() {
    return SIZE_TIERS[Math.floor(Math.random() * SIZE_TIERS.length)];
}

let shuffled = shuffle(images);
let saved    = JSON.parse(localStorage.getItem('savedPins') || '[]');

// ── Create a pin card ─────────────────────────────────────────────
function makePin(src, showSave) {
    const div = document.createElement('div');
    const sz  = randomSize();
    div.className = sz ? `pin ${sz}` : 'pin';
    const isSaved = saved.includes(src);
    const safe    = src.replace(/\\/g, '\\\\').replace(/'/g, "\\'");

    div.innerHTML = `
        <img data-src="${src}" alt="">
        ${showSave ? `
        <div class="pin-overlay">
            <button class="save-btn ${isSaved ? 'saved' : ''}"
                    onclick="toggleSave('${safe}',this,event)">
                ${isSaved ? 'Saved' : 'Save'}
            </button>
        </div>` : ''}
    `;

    div.addEventListener('click', e => {
        if (e.target.tagName !== 'BUTTON') openLightbox(src);
    });

    return div;
}

// ── Lazy-load observer ────────────────────────────────────────────
const isMobile = window.matchMedia('(pointer:coarse)').matches;
const pinObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (!entry.isIntersecting) return;
        const img = entry.target.querySelector('img[data-src]');
        if (!img) return;
        img.src = img.dataset.src;
        img.removeAttribute('data-src');
        img.decoding = 'async';
        img.addEventListener('load', () => {
            img.classList.add('visible');
            entry.target.classList.add('loaded');
        }, { once: true });
        img.addEventListener('error', () => entry.target.style.display = 'none', { once: true });
        pinObserver.unobserve(entry.target);
    });
}, { rootMargin: isMobile ? '150px 0px' : '400px 0px' });

// ── Render ────────────────────────────────────────────────────────
function renderHome() {
    const grid = document.getElementById('home-grid');
    grid.innerHTML = '';
    shuffled.forEach(src => {
        const pin = makePin(src, true);
        grid.appendChild(pin);
        pinObserver.observe(pin);
    });
    initTilt('home-grid');
}

function renderSaved() {
    const grid  = document.getElementById('saved-grid');
    const empty = document.getElementById('saved-empty');
    grid.innerHTML = '';

    if (saved.length === 0) {
        grid.style.display  = 'none';
        empty.style.display = 'flex';
        return;
    }

    grid.style.display  = '';
    empty.style.display = 'none';
    saved.forEach(src => {
        const pin = makePin(src, false);
        grid.appendChild(pin);
        pinObserver.observe(pin);
    });
    initTilt('saved-grid');
}

function toggleSave(src, btn, e) {
    e.stopPropagation();
    const idx = saved.indexOf(src);
    if (idx > -1) {
        saved.splice(idx, 1);
        btn.textContent = 'Save';
        btn.classList.remove('saved');
        toast('Removed from saved', '📌');
    } else {
        saved.push(src);
        btn.textContent = 'Saved';
        btn.classList.add('saved');
        toast('Saved!', '✓');
    }
    localStorage.setItem('savedPins', JSON.stringify(saved));
    renderSaved();
}

// ── Navigation ────────────────────────────────────────────────────
function showPage(page) {
    document.querySelectorAll('.nav-tab').forEach(t =>
        t.classList.toggle('active', t.dataset.page === page));
    document.querySelectorAll('.page').forEach(p =>
        p.classList.remove('active'));
    // Reset header mode when leaving/entering home
    const h = document.getElementById('header');
    if (page !== 'home') {
        h.classList.remove('hero-mode');
    }
    document.getElementById(page + '-page').classList.add('active');
    document.querySelectorAll('.mob-item').forEach(m =>
        m.classList.toggle('active', m.dataset.page === page));

    window.scrollTo({ top: 0, behavior: 'smooth' });
    window.location.hash = page;

    if (page === 'saved') renderSaved();
    if (page === 'home') setTimeout(updateHeaderMode, 50);
}

// ── Mobile menu ───────────────────────────────────────────────────
function openMobileMenu() {
    document.getElementById('mob-menu').classList.add('open');
    document.getElementById('mob-backdrop').classList.add('open');
    document.body.style.overflow = 'hidden';
}

function closeMobileMenu() {
    document.getElementById('mob-menu').classList.remove('open');
    document.getElementById('mob-backdrop').classList.remove('open');
    document.body.style.overflow = '';
}

function mobileNav(page) {
    closeMobileMenu();
    setTimeout(() => showPage(page), 280);
}

// ── Lightbox ──────────────────────────────────────────────────────
let _list = [], _idx = 0;

function preloadAdjacent() {
    [_idx - 1, _idx + 1].forEach(i => {
        if (i >= 0 && i < _list.length) new Image().src = _list[i];
    });
}

function openLightbox(src) {
    const savedPage = document.getElementById('saved-page');
    _list = savedPage.classList.contains('active') && saved.length > 0
            ? saved : shuffled;
    _idx  = _list.indexOf(src);
    if (_idx < 0) _idx = 0;

    document.getElementById('lb-img').src = src;
    document.getElementById('lightbox').classList.add('active');
    document.body.style.overflow = 'hidden';
    refreshArrows();
    preloadAdjacent();
}

function closeLightbox() {
    document.getElementById('lightbox').classList.remove('active');
    document.body.style.overflow = '';
}

function handleLbClick(e) {
    if (e.target.id === 'lightbox') closeLightbox();
}

function stepImg(dir) {
    _idx = (_idx + dir + _list.length) % _list.length;
    document.getElementById('lb-img').src = _list[_idx];
    refreshArrows();
    preloadAdjacent();
}

function refreshArrows() {
    document.querySelector('.lb-arrow.prev').style.opacity =
        _idx === 0                 ? '0.25' : '1';
    document.querySelector('.lb-arrow.next').style.opacity =
        _idx === _list.length - 1  ? '0.25' : '1';
}

// ── Contact ───────────────────────────────────────────────────────
function handleContact(e) {
    e.preventDefault();
    toast('Message sent!', '✉️');
    e.target.reset();
}

// ── Toast ─────────────────────────────────────────────────────────
function toast(msg, icon = '✓') {
    const area = document.getElementById('toast-area');
    const el   = document.createElement('div');
    el.className = 'toast';
    el.innerHTML = `<span>${icon}</span><span>${msg}</span>`;
    area.appendChild(el);
    setTimeout(() => {
        el.classList.add('out');
        setTimeout(() => el.remove(), 260);
    }, 3000);
}

// ── Tilt (desktop) ───────────────────────────────────────────────
function initTilt(gridId) {
    const grid = document.getElementById(gridId);
    if (!grid || window.matchMedia('(pointer:coarse)').matches) return;

    grid.querySelectorAll('.pin').forEach(pin => {
        pin.addEventListener('mousemove', e => {
            const r  = pin.getBoundingClientRect();
            const rx = ((e.clientY - r.top  - r.height / 2) / (r.height / 2)) * -12;
            const ry = ((e.clientX - r.left - r.width  / 2) / (r.width  / 2)) *  12;
            pin.style.transform  = `perspective(900px) rotateX(${rx}deg) rotateY(${ry}deg) scale(1.02)`;
            pin.style.transition = 'transform 0.08s ease-out';
            pin.style.zIndex     = '5';
        });
        pin.addEventListener('mouseleave', () => {
            pin.style.transform  = 'perspective(900px) rotateX(0) rotateY(0) scale(1)';
            pin.style.transition = 'transform 0.4s ease-out';
            pin.style.zIndex     = '';
        });
    });
}

// ── Swipe support for lightbox ────────────────────────────────────
let _tx = 0, _ty = 0;
const lb = document.getElementById('lightbox');
lb.addEventListener('touchstart', e => {
    _tx = e.touches[0].clientX;
    _ty = e.touches[0].clientY;
}, { passive: true });
lb.addEventListener('touchend', e => {
    const dx = e.changedTouches[0].clientX - _tx;
    const dy = e.changedTouches[0].clientY - _ty;
    if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > 40) {
        stepImg(dx > 0 ? -1 : 1);          // swipe left = next, right = prev
    } else if (dy > 80 && Math.abs(dx) < 40) {
        closeLightbox();                     // swipe down to close
    }
}, { passive: true });

// ── Keyboard shortcuts ────────────────────────────────────────────
document.addEventListener('keydown', e => {
    const lb = document.getElementById('lightbox');
    if (!lb.classList.contains('active')) return;
    if (e.key === 'Escape')     closeLightbox();
    if (e.key === 'ArrowLeft')  stepImg(-1);
    if (e.key === 'ArrowRight') stepImg(1);
});

// ── Scroll effects ────────────────────────────────────────────────
function updateHeaderMode() {
    const h       = document.getElementById('header');
    const onHome  = document.getElementById('home-page').classList.contains('active');
    const hero    = document.getElementById('hero-section');
    const heroH   = hero ? hero.offsetHeight : 0;
    const overHero = onHome && window.scrollY < heroH - 80;
    const farDown  = window.scrollY > 60;

    h.classList.toggle('hero-mode', overHero);
    h.classList.toggle('scrolled',  !overHero && farDown);
    document.getElementById('back-top').classList.toggle('show', window.scrollY > 400);
}
window.addEventListener('scroll', updateHeaderMode, { passive: true });

// ── Hash routing ──────────────────────────────────────────────────
window.addEventListener('load', () => {
    const hash = window.location.hash.replace('#', '');
    if (['home','saved','shop','contact'].includes(hash)) showPage(hash);
});

// ── Loader ────────────────────────────────────────────────────────
(function () {
    const ldrEl     = document.getElementById('loader');
    const ldrCount  = document.getElementById('ldr-count');
    const ldrFill   = document.getElementById('ldr-fill');
    const ldrStatus = document.getElementById('ldr-status');
    const ldrDate   = document.getElementById('ldr-date');
    const hv        = document.getElementById('hero-video');

    // Date stamp
    ldrDate.textContent = new Date().toISOString().slice(0, 10).replace(/-/g, '.');

    // Show terminal lines with delay
    ['ldr-l1', 'ldr-l2', 'ldr-l3'].forEach((id, i) => {
        setTimeout(() => document.getElementById(id).classList.add('show'), i * 380 + 120);
    });

    let count      = 0;
    let videoReady = false;
    let minDone    = false;
    let finished   = false;
    const statuses = ['INITIALIZING', 'LOADING ASSETS', 'CALIBRATING', 'RENDERING', 'LAUNCHING'];

    function finishLoader() {
        if (finished || !videoReady || !minDone) return;
        finished = true;
        clearInterval(countTimer);
        ldrCount.textContent = '100';
        ldrFill.style.width  = '100%';
        ldrStatus.textContent = 'COMPLETE';
        setTimeout(() => {
            ldrEl.classList.add('done');
            document.body.classList.add('ready');
            updateHeaderMode();
        }, 480);
    }

    // Minimum visible time so animation breathes
    setTimeout(() => { minDone = true; finishLoader(); }, 2600);

    // Video ready signal
    if (hv) {
        hv.addEventListener('canplaythrough', () => { videoReady = true; finishLoader(); }, { once: true });
        hv.addEventListener('playing', () => hv.classList.add('playing'), { once: true });
    } else {
        videoReady = true;
    }
    // Hard fallback — never trap user more than 10s
    setTimeout(() => { if (!videoReady) { videoReady = true; finishLoader(); } }, 10000);

    // Counting animation — fast start, slows near 99
    const countTimer = setInterval(() => {
        if (count >= 99 || finished) return;
        const speed = count < 60 ? (Math.random() * 4 + 2)
                    : count < 85 ? (Math.random() * 1.8 + 0.6)
                                 : (Math.random() * 0.5 + 0.1);
        count = Math.min(count + speed, 99);
        const r = Math.floor(count);
        ldrCount.textContent = String(r).padStart(3, '0');
        ldrFill.style.width  = r + '%';
        ldrStatus.textContent = statuses[Math.min(Math.floor(r / 22), statuses.length - 2)];
    }, 40);
})();

// ── Easter eggs ───────────────────────────────────────────────────
console.log('%c🔬 Ravi Sauce Labs', 'font-size:18px;color:#2DD512;font-weight:bold;');
console.log('%cType unlock() for a surprise.', 'color:#888;font-style:italic;');

window.unlock = () => {
    document.body.style.filter = 'hue-rotate(180deg)';
    setTimeout(() => document.body.style.filter = '', 600);
    return '🔓';
};

// Konami code → matrix rain
let kseq = [];
const kcode = ['ArrowUp','ArrowUp','ArrowDown','ArrowDown','ArrowLeft','ArrowRight','ArrowLeft','ArrowRight','b','a'];
document.addEventListener('keydown', e => {
    kseq.push(e.key); kseq = kseq.slice(-10);
    if (kseq.join(',') !== kcode.join(',')) return;

    const c = document.createElement('canvas');
    Object.assign(c.style, { position:'fixed', inset:'0', width:'100%', height:'100%', zIndex:'9998', pointerEvents:'none' });
    document.body.appendChild(c);
    c.width = innerWidth; c.height = innerHeight;
    const ctx  = c.getContext('2d');
    const chars = 'RAVISAUCE';
    const cols  = Math.floor(c.width / 14);
    const drops = Array(cols).fill(1);
    let frames  = 0;
    const id = setInterval(() => {
        ctx.fillStyle = 'rgba(0,0,0,0.05)';
        ctx.fillRect(0, 0, c.width, c.height);
        ctx.fillStyle = '#2DD512';
        ctx.font = '14px monospace';
        drops.forEach((y, i) => {
            ctx.fillText(chars[Math.floor(Math.random() * chars.length)], i * 14, y * 14);
            if (y * 14 > c.height && Math.random() > 0.975) drops[i] = 0;
            drops[i]++;
        });
        if (++frames > 300) { clearInterval(id); c.remove(); }
    }, 50);
});

// ── HUD clock ─────────────────────────────────────────────────────
(function () {
    const el = document.getElementById('hud-clock');
    if (!el) return;
    function tick() {
        const n = new Date();
        el.textContent = String(n.getHours()).padStart(2,'0') + ':' +
                         String(n.getMinutes()).padStart(2,'0') + ':' +
                         String(n.getSeconds()).padStart(2,'0');
    }
    tick();
    setInterval(tick, 1000);
})();

// ── Panel videos: random start times (each source URL is unique so browser
//    treats them as independent streams — no shared buffer sync) ────────
(function () {
    document.querySelectorAll('.hud-vid').forEach(v => {
        const isMain = v.classList.contains('hud-vid-main');

        function seekRandom() {
            if (!isMain && v.duration > 2) {
                // Pick a random point but leave 1s buffer before end
                v.currentTime = 0.5 + Math.random() * (v.duration - 1.5);
            }
        }

        // Primary: set on loadedmetadata
        v.addEventListener('loadedmetadata', seekRandom, { once: true });

        // Fallback: if canplay fires before seek stuck, reapply
        v.addEventListener('canplay', () => {
            if (!isMain && v.currentTime < 0.3 && v.duration > 2) seekRandom();
        }, { once: true });

        v.addEventListener('playing', () => v.classList.add('playing'), { once: true });
    });
})();

// ── Hero panels: designed layout + drag (mouse desktop, touch mobile) ─
(function () {
    const hero  = document.getElementById('hero-section');
    const isMob = window.innerWidth <= 900;
    const PAD   = 12;
    const BAR_H = 50;
    const NAV_H = 74;  // nav height + gap — keep panels below this on mobile

    // On mobile: show pa + pb + main (3 panels)
    // On desktop: all 7 panels
    const all = [...document.querySelectorAll('.hud-panel')];
    const panels = isMob
        ? all.filter(p => p.classList.contains('hud-pa') ||
                          p.classList.contains('hud-pb') ||
                          p.classList.contains('hud-main'))
        : all;

    // [leftF, topF, widthF, heightF, wobblePx]
    const DESKTOP_L = [
        [0.01, 0.02, 0.12, 0.48, 16],  // pa — tall portrait, far left
        [0.01, 0.53, 0.10, 0.27, 14],  // pb — short square, below pa
        [0.14, 0.04, 0.08, 0.34, 12],  // pc — thin sliver overlapping main
        [0.14, 0.42, 0.09, 0.40, 12],  // pd — taller sliver below pc
        [0.75, 0.04, 0.13, 0.22, 18],  // pe — small floating top-right
        [0.76, 0.60, 0.21, 0.32, 16],  // pf — wider bottom-right
        [0.19, 0.03, 0.74, 0.90,  8],  // main — dominant center
    ];
    const MOBILE_L = [
        [0.04, 0.13, 0.44, 0.38, 12],  // pa — medium, upper-left
        [0.52, 0.52, 0.42, 0.35, 10],  // pb — medium, lower-right
        [0.07, 0.10, 0.78, 0.65,  8],  // main — large, central
    ];
    const DESKTOP_Z = [3, 3, 4, 4, 5, 5, 1];
    const MOBILE_Z  = [4, 4, 1];

    const LAYOUTS = isMob ? MOBILE_L  : DESKTOP_L;
    const Z_ORDER = isMob ? MOBILE_Z  : DESKTOP_Z;

    function wobble(px) { return Math.round((Math.random() - 0.5) * 2 * px); }

    function place() {
        const W = hero.offsetWidth;
        const H = hero.offsetHeight;
        const minTop = isMob ? NAV_H : PAD;
        panels.forEach((panel, i) => {
            const [lf, tf, wf, hf, wob] = LAYOUTS[i];
            const w    = Math.round(wf * W);
            const h    = Math.round(hf * (H - BAR_H));
            const left = Math.max(PAD, Math.round(lf * W) + wobble(wob));
            const top  = Math.max(minTop, Math.round(tf * (H - BAR_H)) + wobble(wob));
            panel.style.left   = left + 'px';
            panel.style.top    = top  + 'px';
            panel.style.width  = w    + 'px';
            panel.style.height = h    + 'px';
            panel.style.right  = 'auto';
            panel.style.bottom = 'auto';
            panel.style.zIndex = Z_ORDER[i];
        });
    }

    let highZ = 10;

    function initDrag() {
        panels.forEach(panel => {
            if (isMob) {
                // ── Touch drag ──
                let sx, sy, sl, st;
                panel.addEventListener('touchstart', e => {
                    sx = e.touches[0].clientX;
                    sy = e.touches[0].clientY;
                    sl = parseInt(panel.style.left) || 0;
                    st = parseInt(panel.style.top)  || 0;
                    panel.style.zIndex = ++highZ;
                }, { passive: true });

                panel.addEventListener('touchmove', e => {
                    e.preventDefault();
                    const W = hero.offsetWidth;
                    const H = hero.offsetHeight;
                    let l = sl + (e.touches[0].clientX - sx);
                    let t = st + (e.touches[0].clientY - sy);
                    l = Math.max(PAD, Math.min(l, W - panel.offsetWidth  - PAD));
                    t = Math.max(NAV_H, Math.min(t, H - BAR_H - panel.offsetHeight - PAD));
                    panel.style.left = l + 'px';
                    panel.style.top  = t + 'px';
                }, { passive: false });

            } else {
                // ── Mouse drag ──
                panel.addEventListener('mousedown', e => {
                    e.preventDefault();
                    const heroR = hero.getBoundingClientRect();
                    const offX  = e.clientX - heroR.left - parseInt(panel.style.left || 0);
                    const offY  = e.clientY - heroR.top  - parseInt(panel.style.top  || 0);
                    panel.classList.add('dragging');
                    panel.style.zIndex = ++highZ;

                    function onMove(e) {
                        const heroR = hero.getBoundingClientRect();
                        const W = hero.offsetWidth;
                        const H = hero.offsetHeight;
                        let l = e.clientX - heroR.left - offX;
                        let t = e.clientY - heroR.top  - offY;
                        l = Math.max(PAD, Math.min(l, W - panel.offsetWidth  - PAD));
                        t = Math.max(PAD, Math.min(t, H - BAR_H - panel.offsetHeight - PAD));
                        panel.style.left = l + 'px';
                        panel.style.top  = t + 'px';
                    }
                    function onUp() {
                        panel.classList.remove('dragging');
                        document.removeEventListener('mousemove', onMove);
                        document.removeEventListener('mouseup',  onUp);
                    }
                    document.addEventListener('mousemove', onMove);
                    document.addEventListener('mouseup',  onUp);
                });
            }
        });
    }

    function initResize() {
        if (isMob) return;
        const DIRS = ['nw', 'ne', 'sw', 'se'];
        const MIN_W = 80, MIN_H = 60;

        panels.forEach(panel => {
            DIRS.forEach(dir => {
                const handle = document.createElement('div');
                handle.className = 'resize-handle';
                handle.dataset.dir = dir;
                panel.appendChild(handle);

                handle.addEventListener('mousedown', e => {
                    e.preventDefault();
                    e.stopPropagation(); // don't trigger drag
                    panel.style.zIndex = ++highZ;

                    const startX = e.clientX, startY = e.clientY;
                    const startL = parseInt(panel.style.left) || 0;
                    const startT = parseInt(panel.style.top)  || 0;
                    const startW = panel.offsetWidth;
                    const startH = panel.offsetHeight;

                    function onMove(e) {
                        const dx = e.clientX - startX;
                        const dy = e.clientY - startY;
                        const W  = hero.offsetWidth;
                        const H  = hero.offsetHeight;
                        let l = startL, t = startT, w = startW, h = startH;

                        if (dir === 'se' || dir === 'ne') w = Math.max(MIN_W, startW + dx);
                        if (dir === 'sw' || dir === 'nw') {
                            const nw = Math.max(MIN_W, startW - dx);
                            l = startL + (startW - nw);
                            w = nw;
                        }
                        if (dir === 'sw' || dir === 'se') h = Math.max(MIN_H, startH + dy);
                        if (dir === 'nw' || dir === 'ne') {
                            const nh = Math.max(MIN_H, startH - dy);
                            t = startT + (startH - nh);
                            h = nh;
                        }
                        l = Math.max(PAD, Math.min(l, W - MIN_W - PAD));
                        t = Math.max(PAD, Math.min(t, H - BAR_H - MIN_H - PAD));
                        panel.style.left   = l + 'px';
                        panel.style.top    = t + 'px';
                        panel.style.width  = w + 'px';
                        panel.style.height = h + 'px';
                    }
                    function onUp() {
                        document.removeEventListener('mousemove', onMove);
                        document.removeEventListener('mouseup', onUp);
                    }
                    document.addEventListener('mousemove', onMove);
                    document.addEventListener('mouseup', onUp);
                });
            });
        });
    }

    requestAnimationFrame(() => { place(); initDrag(); initResize(); });
})();

// ── Init ──────────────────────────────────────────────────────────
renderHome();
renderSaved();
</script>
</body>
</html>
