<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAVISAUCE</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <!-- No social preview image -->
    <meta property="og:title" content="RAVISAUCE">
    <meta property="og:type" content="website">
    <meta name="robots" content="noimageindex">
    <style>
        /* ── RESET ─────────────────────────────────────────────── */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --green:  #2DD512;
            --gd:     #25B50F;
            --black:  #111;
            --muted:  #666;
            --g1:     #f5f5f5;
            --g2:     #efefef;
            --g3:     #ccc;
            --nav-h:  70px;
            --r:      16px;
            --font:   -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        html { scroll-behavior: smooth; }
        ::selection { background: rgba(45,213,18,.25); color: #111; }

        body {
            font-family: var(--font);
            background: #fff;
            color: var(--black);
        }

        img { display: block; max-width: 100%; }
        button { font-family: var(--font); cursor: pointer; }

        /* ── HEADER ─────────────────────────────────────────────── */
        .header {
            position: fixed;
            top: 0; left: 0; right: 0;
            height: var(--nav-h);
            background: #fff;
            border-bottom: 1px solid var(--g2);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 24px;
            z-index: 1000;
            transition: box-shadow .3s, background .3s, border-color .3s;
        }
        .header.scrolled {
            background: rgba(255,255,255,.96);
            backdrop-filter: blur(12px);
            box-shadow: 0 1px 20px rgba(0,0,0,.06);
            border-bottom-color: transparent;
        }

        .logo-wrap {
            position: absolute;
            left: 24px;
            perspective: 320px;
        }
        .logo {
            width: 44px; height: 44px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer;
            border: none;
            background: transparent;
            border-radius: 0;
        }
        .logo img {
            width: 100%; height: 100%; object-fit: contain;
            animation: logoSpin3d 7s linear infinite;
        }
        @keyframes logoSpin3d {
            0%   { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        /* ── NAV ─────────────────────────────────────────────────── */
        .nav-tabs { display: flex; gap: 4px; }

        .nav-tab {
            height: 40px;
            padding: 0 18px;
            border-radius: 20px;
            font-size: 15px;
            font-weight: 500;
            border: none;
            background: transparent;
            color: var(--muted);
            transition: background .15s, color .15s;
        }
        .nav-tab:hover  { background: var(--g2); color: var(--black); }
        .nav-tab.active { background: var(--black); color: #fff; }

        /* ── MOBILE TOGGLE ───────────────────────────────────────── */
        .mobile-toggle {
            display: none;
            flex-direction: column;
            gap: 5px;
            padding: 8px;
            background: transparent;
            border: none;
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
        }
        .h-line { height: 2px; width: 24px; background: var(--black); border-radius: 2px; transition: all .3s; }

        @media (max-width: 768px) {
            .nav-tabs { display: none; }
            .mobile-toggle { display: flex; }
        }

        /* Hide Saved on mobile */
        @media (max-width: 768px) {
            .nav-tab[data-page="saved"] { display: none; }
        }
        @media (pointer: coarse) {
            .mob-item[data-page="saved"] { display: none; }
        }

        /* ── MOBILE MENU ─────────────────────────────────────────── */
        .mob-menu {
            position: fixed;
            top: 0; right: -100%;
            width: 80%; max-width: 340px;
            height: 100vh;
            background: #0a0a0a;
            border-left: 1px solid #1f1f1f;
            z-index: 5000;
            transition: right .4s cubic-bezier(.34,1.56,.64,1);
            display: flex;
            flex-direction: column;
            font-family: 'Courier New', monospace;
        }
        .mob-menu.open { right: 0; }

        .mob-backdrop {
            position: fixed; inset: 0;
            background: rgba(0,0,0,.75);
            z-index: 4999;
            opacity: 0; pointer-events: none;
            transition: opacity .3s;
        }
        .mob-backdrop.open { opacity: 1; pointer-events: all; }

        .mob-head {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 22px 20px;
            border-bottom: 1px solid #1a1a1a;
        }
        .mob-id { font-size: 10px; letter-spacing: 2px; color: var(--green); }

        .mob-close {
            width: 36px; height: 36px;
            background: transparent;
            border: 1px solid #333;
            border-radius: 50%;
            color: #888;
            display: flex; align-items: center; justify-content: center;
            transition: all .2s;
        }
        .mob-close:hover { border-color: var(--green); color: var(--green); transform: rotate(90deg); }

        .mob-items { flex: 1; padding: 16px; display: flex; flex-direction: column; gap: 10px; }

        .mob-item {
            display: flex;
            align-items: center;
            gap: 18px;
            padding: 18px 20px;
            background: #0f0f0f;
            border: 1px solid #1a1a1a;
            border-radius: 10px;
            cursor: pointer;
            text-align: left;
            width: 100%;
            transition: background .2s, border-color .2s;
        }
        .mob-item:hover,
        .mob-item.active { background: #1a1a1a; border-color: var(--green); }

        .mob-num   { font-size: 10px; color: var(--green); opacity: .7; }
        .mob-label { font-size: 13px; letter-spacing: 2px; color: #fff; }

        .mob-foot {
            padding: 20px;
            border-top: 1px solid #1a1a1a;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .mob-status { display: flex; align-items: center; gap: 8px; font-size: 10px; letter-spacing: 1px; color: var(--green); }
        .status-dot { width: 6px; height: 6px; background: var(--green); border-radius: 50%; animation: pulse 2s infinite; }

        @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.35} }

        /* ── MAIN ─────────────────────────────────────────────────── */
        .main {
            padding-top: calc(var(--nav-h) + 4px);
            padding-left: 18px;
            padding-right: 18px;
            padding-bottom: 40px;
            min-height: 100vh;
        }
        /* Mobile padding matches masonry gutter */
        @media (max-width: 900px) {
            .main { padding-left: 8px; padding-right: 8px; }
            .hero { margin-left: -8px; margin-right: -8px; }
        }
        @media (max-width: 600px) {
            .main { padding-left: 6px; padding-right: 6px; }
            .hero { margin-left: -6px; margin-right: -6px; }
        }

        .page { display: none; opacity: 0; transform: translateY(16px); }
        .page.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
            animation: pageIn .4s cubic-bezier(.34,1.56,.64,1);
        }
        @keyframes pageIn { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }

        /* ── MASONRY ──────────────────────────────────────────────── */
        .masonry-grid { column-count: 4; column-gap: 18px; padding-top: 18px; }

        @media (max-width: 900px)  { .masonry-grid { column-count: 3; column-gap: 8px; padding-top: 8px; } }
        @media (max-width: 600px)  { .masonry-grid { column-count: 2; column-gap: 6px; padding-top: 6px; } }

        /* ── PIN ──────────────────────────────────────────────────── */
        @keyframes shimmer {
            0%   { background-position: -200% 0; }
            100% { background-position:  200% 0; }
        }
        .pin {
            break-inside: avoid;
            margin-bottom: 18px;
            border-radius: var(--r);
            overflow: hidden;
            position: relative;
            cursor: pointer;
            background: linear-gradient(90deg, #efefef 25%, #e2e2e2 50%, #efefef 75%);
            background-size: 200% 100%;
            animation: shimmer 1.4s ease-in-out infinite;
            transform-style: preserve-3d;
        }
        .pin.loaded { background: none; animation: none; }
        @media (max-width: 900px) { .pin { margin-bottom: 8px; } }
        @media (max-width: 600px) { .pin { border-radius: 8px; margin-bottom: 6px; } }

        .pin img {
            width: 100%;
            display: block;
            border-radius: var(--r);
            opacity: 0;
            transform: translateY(12px);
            transition: opacity .4s ease, transform .4s ease;
        }
        .pin img.visible { opacity: 1; transform: translateY(0); }
        @media (max-width: 600px) { .pin img { border-radius: 8px; } }

        /* Images show at their natural proportions — no cropping */

        /* Hide save overlay on touch devices */
        @media (pointer: coarse) { .pin-overlay { display: none; } }

        .pin-overlay {
            position: absolute; inset: 0;
            border-radius: var(--r);
            background: rgba(0,0,0,.35);
            opacity: 0;
            transition: opacity .2s;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 12px;
        }
        @media (max-width: 600px) { .pin-overlay { border-radius: 12px; } }
        .pin:hover .pin-overlay { opacity: 1; }

        .save-btn {
            align-self: flex-end;
            background: var(--green);
            color: #fff;
            border: none;
            padding: 10px 18px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 15px;
            transition: transform .1s, background .15s;
        }
        .save-btn:hover  { background: var(--gd); transform: scale(1.05); }
        .save-btn.saved  { background: var(--black); }

        /* ── LIGHTBOX ─────────────────────────────────────────────── */
        .lightbox {
            position: fixed; inset: 0;
            background: rgba(0,0,0,.92);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .lightbox.active { display: flex; }

        /*
         * CLOSE BUTTON FIX:
         * • position:fixed so it's always top-right of the SCREEN, not the image
         * • display:flex + align/justify center so the SVG is pixel-perfect centered
         * • SVG instead of the × character (no font-metric surprises)
         */
        .lb-close {
            position: fixed;
            top: 18px;
            right: 18px;
            width: 44px;
            height: 44px;
            background: rgba(255,255,255,.15);
            border: 1.5px solid rgba(255,255,255,.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2010;
            color: #fff;
            transition: background .15s, transform .2s;
        }
        .lb-close:hover { background: rgba(255,255,255,.28); transform: scale(1.08) rotate(90deg); }

        .lb-img-wrap {
            position: relative;
            max-width: min(90vw, 900px);
            max-height: 90vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lb-img-wrap img {
            max-width: 100%;
            max-height: 90vh;
            border-radius: var(--r);
            box-shadow: 0 24px 64px rgba(0,0,0,.6);
            display: block;
        }

        .lb-arrow {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            width: 44px; height: 44px;
            background: rgba(255,255,255,.15);
            border: 1.5px solid rgba(255,255,255,.25);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer;
            color: #fff;
            transition: background .15s;
            z-index: 2005;
        }
        .lb-arrow:hover { background: rgba(255,255,255,.28); }
        .lb-arrow.prev  { left: 20px; }
        .lb-arrow.next  { right: 20px; }
        @media (max-width: 600px) { .lb-arrow { display: none; } }

        /* ── SAVED EMPTY ──────────────────────────────────────────── */
        .saved-empty {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: calc(100vh - var(--nav-h));
            gap: 10px;
            color: var(--muted);
            text-align: center;
            padding: 40px 20px;
        }
        .saved-empty-icon { font-size: 48px; margin-bottom: 8px; }
        .saved-empty h3   { font-size: 22px; font-weight: 400; color: var(--black); }
        .saved-empty p    { font-size: 15px; max-width: 300px; line-height: 1.6; }

        .browse-link {
            margin-top: 8px;
            display: inline-block;
            padding: 12px 28px;
            background: var(--black);
            color: #fff;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            letter-spacing: .5px;
            transition: background .2s, transform .2s;
        }
        .browse-link:hover { background: var(--green); color: #000; transform: translateY(-2px); }

        /* ── SHOP — COMING SOON ───────────────────────────────────── */
        .coming-soon {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: calc(100vh - var(--nav-h));
            padding: 0 24px;
            text-align: center;
        }
        .cs-tag {
            font-size: 11px;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: var(--green);
            font-weight: 600;
            margin-bottom: 24px;
        }
        .coming-soon h1 {
            font-size: clamp(52px, 10vw, 96px);
            font-weight: 300;
            letter-spacing: -3px;
            line-height: 1;
            color: var(--black);
            margin-bottom: 20px;
        }
        .coming-soon p {
            font-size: 17px;
            color: var(--muted);
            line-height: 1.7;
            max-width: 360px;
            margin-bottom: 44px;
        }
        .cs-bar-wrap {
            width: 160px; height: 2px;
            background: var(--g2);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 12px;
        }
        .cs-bar-fill {
            height: 100%;
            background: var(--green);
            border-radius: 2px;
            animation: csSlide 2.4s ease-in-out infinite alternate;
        }
        @keyframes csSlide {
            0%   { width: 30%; margin-left: 0; }
            100% { width: 50%; margin-left: 50%; }
        }
        .cs-hint { font-size: 11px; letter-spacing: 2px; color: var(--g3); text-transform: uppercase; }

        /* ── SHOP ─────────────────────────────────────────────────── */
        @keyframes blink-cur  { 0%,49%{opacity:1}50%,100%{opacity:0} }
        @keyframes scan-sweep { 0%{top:-35%} 100%{top:110%} }
        @keyframes status-scroll { 0%{transform:translateX(0)} 100%{transform:translateX(-50%)} }
        @keyframes shake { 0%,100%{transform:translateX(0)} 20%,60%{transform:translateX(-6px)} 40%,80%{transform:translateX(6px)} }

        .shop-wrap {
            min-height: calc(100vh - var(--nav-h));
            background: #0a0a0a;
            color: #e0e0e0;
            padding: 0 18px 80px;
        }
        .shop-hd {
            display: flex; align-items: baseline;
            justify-content: space-between; gap: 16px;
            padding: 36px 0 12px;
            border-bottom: 1px solid #1f1f1f;
            margin-bottom: 0;
        }
        .shop-hd-left { display: flex; flex-direction: column; gap: 4px; }
        .shop-hd-label {
            font-family: 'Courier New', monospace;
            font-size: 8px; letter-spacing: 3px;
            color: var(--green); text-transform: uppercase;
        }
        .shop-hd-label::after { content: '_'; animation: blink-cur 1.1s step-end infinite; }
        .shop-hd-title {
            font-family: var(--font);
            font-size: 22px; font-weight: 700;
            letter-spacing: -0.5px; color: #f0f0f0;
        }
        .shop-hd-count {
            font-family: 'Courier New', monospace;
            font-size: 9px; color: rgba(255,255,255,.3);
            letter-spacing: 2px; align-self: flex-end;
        }
        .shop-status {
            overflow: hidden; padding: 6px 0;
            border-bottom: 1px solid #1a1a1a; margin-bottom: 22px;
        }
        .shop-status-inner {
            display: inline-block; white-space: nowrap;
            animation: status-scroll 28s linear infinite;
            font-family: 'Courier New', monospace;
            font-size: 7px; letter-spacing: 2px;
            color: rgba(255,255,255,.15); text-transform: uppercase;
        }
        .shop-status-inner em { color: var(--green); font-style: normal; }
        .shop-filter { display: flex; gap: 4px; padding-bottom: 28px; flex-wrap: wrap; }
        .shop-filter-btn {
            height: 40px; padding: 0 18px; border-radius: 20px; border: none;
            background: transparent; font-family: var(--font);
            font-size: 15px; font-weight: 500;
            color: rgba(255,255,255,.4); cursor: pointer;
            transition: background .15s, color .15s;
        }
        .shop-filter-btn:hover  { background: #1a1a1a; color: #fff; }
        .shop-filter-btn.active { background: #fff; color: #000; }
        .shop-grid {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;
        }
        .shop-item { cursor: pointer; }
        .shop-item[hidden] { display: none; }
        .shop-img-wrap {
            position: relative; aspect-ratio: 1;
            background: #111; overflow: hidden;
            border-radius: var(--r);
            border: 1px solid #1e1e1e;
            transition: border-color .3s, box-shadow .3s;
        }
        /* rounded corner brackets */
        .shop-img-wrap::before, .shop-img-wrap::after {
            content: ''; position: absolute;
            width: 14px; height: 14px; z-index: 4;
            opacity: .25; transition: opacity .3s; pointer-events: none;
        }
        .shop-img-wrap::before {
            top: 10px; left: 10px;
            border-top: 1.5px solid var(--green);
            border-left: 1.5px solid var(--green);
            border-radius: 5px 0 0 0;
        }
        .shop-img-wrap::after {
            bottom: 10px; right: 10px;
            border-bottom: 1.5px solid var(--green);
            border-right: 1.5px solid var(--green);
            border-radius: 0 0 5px 0;
        }
        .shop-item:hover .shop-img-wrap {
            border-color: #333;
            box-shadow: 0 8px 32px rgba(0,0,0,.5);
        }
        .shop-item:hover .shop-img-wrap::before,
        .shop-item:hover .shop-img-wrap::after { opacity: .9; }
        .shop-scan {
            position: absolute; left: 0; right: 0; top: -35%; height: 35%;
            background: linear-gradient(to bottom, transparent, rgba(45,213,18,.06), transparent);
            z-index: 3; pointer-events: none;
        }
        .shop-item:hover .shop-scan { animation: scan-sweep .85s ease-in-out forwards; }
        .shop-img-wrap img {
            width: 100%; height: 100%; object-fit: contain; display: block;
            transition: transform .55s ease; padding: 8%;
            filter: drop-shadow(0 4px 20px rgba(0,0,0,.6));
        }
        .shop-item:hover .shop-img-wrap img { transform: scale(1.05); }
        .shop-item-spec {
            font-family: 'Courier New', monospace; font-size: 7px; letter-spacing: 2px;
            color: rgba(45,213,18,.6); padding: 10px 0 3px; text-transform: uppercase;
        }
        .shop-item-name {
            display: block; font-family: var(--font); font-size: 14px; font-weight: 500;
            color: rgba(255,255,255,.85); margin-bottom: 3px;
        }
        .shop-item-price {
            font-family: 'Courier New', monospace; font-size: 12px;
            color: rgba(255,255,255,.4); letter-spacing: 1px;
        }
        .shop-item-info { padding: 0 0 20px; }

        /* ── CART BUTTON (nav) ───────────────────────────────────────── */
        .cart-btn {
            position: absolute; right: 24px;
            display: flex; align-items: center; gap: 6px;
            background: transparent; border: none;
            color: var(--black); cursor: pointer;
            font-family: var(--font); font-size: 14px; font-weight: 500;
            padding: 8px 12px; border-radius: 20px;
            transition: background .15s;
        }
        .cart-btn:hover { background: var(--g2); }
        .cart-badge {
            display: none; align-items: center; justify-content: center;
            width: 18px; height: 18px; border-radius: 50%;
            background: var(--black); color: #fff;
            font-size: 10px; font-weight: 700;
        }
        @media (max-width: 768px) {
            .cart-btn { right: 60px; }
        }

        /* ── CART DRAWER ─────────────────────────────────────────────── */
        .cart-backdrop {
            position: fixed; inset: 0; background: rgba(0,0,0,.6);
            z-index: 2999; opacity: 0; pointer-events: none; transition: opacity .3s;
        }
        .cart-backdrop.open { opacity: 1; pointer-events: all; }
        .cart-drawer {
            position: fixed; top: 0; right: -110%; width: 380px; max-width: 100vw;
            height: 100vh; background: #0a0a0a;
            border-left: 1px solid #1f1f1f;
            z-index: 3000; transition: right .4s cubic-bezier(.34,1.56,.64,1);
            display: flex; flex-direction: column;
        }
        .cart-drawer.open { right: 0; }
        .cart-head {
            display: flex; align-items: center; justify-content: space-between;
            padding: 20px; border-bottom: 1px solid #1f1f1f;
        }
        .cart-head-title {
            font-family: 'Courier New', monospace; font-size: 10px; letter-spacing: 3px;
            color: var(--green); text-transform: uppercase;
        }
        .cart-close {
            width: 32px; height: 32px; border-radius: 50%; border: 1px solid #333;
            background: transparent; color: #888; display: flex; align-items: center; justify-content: center;
            cursor: pointer; font-size: 18px; transition: all .2s;
        }
        .cart-close:hover { border-color: var(--green); color: var(--green); }
        .cart-list { flex: 1; overflow-y: auto; padding: 16px 20px; display: flex; flex-direction: column; gap: 16px; }
        .cart-empty { text-align: center; padding: 60px 20px; color: rgba(255,255,255,.3); font-size: 13px; }
        .cart-item { display: flex; gap: 12px; align-items: center; }
        .cart-item-img { width: 64px; height: 64px; object-fit: contain; border-radius: 8px; background: #111; padding: 6px; flex-shrink: 0; }
        .cart-item-info { flex: 1; }
        .cart-item-name { font-size: 13px; font-weight: 500; color: #e0e0e0; margin-bottom: 3px; }
        .cart-item-meta { font-family: 'Courier New', monospace; font-size: 10px; color: rgba(255,255,255,.35); letter-spacing: 1px; margin-bottom: 4px; }
        .cart-item-price { font-family: 'Courier New', monospace; font-size: 12px; color: var(--green); }
        .cart-item-remove {
            background: transparent; border: none; color: rgba(255,255,255,.3);
            font-size: 20px; cursor: pointer; padding: 4px; line-height: 1;
            transition: color .2s;
        }
        .cart-item-remove:hover { color: #ff4444; }
        .cart-footer {
            border-top: 1px solid #1f1f1f; padding: 20px;
            display: flex; flex-direction: column; gap: 12px;
        }
        .cart-subtotal-row {
            display: flex; justify-content: space-between;
            font-family: 'Courier New', monospace; font-size: 11px;
            color: rgba(255,255,255,.5); letter-spacing: 1px;
        }
        .cart-subtotal-row.total { color: #f0f0f0; font-size: 13px; }
        .cart-checkout-btn {
            height: 48px; border-radius: 24px; border: none;
            background: var(--green); color: #000;
            font-family: var(--font); font-size: 15px; font-weight: 700;
            cursor: pointer; transition: opacity .2s;
        }
        .cart-checkout-btn:hover { opacity: .85; }

        /* ── PRODUCT DETAIL (PDP) ────────────────────────────────────── */
        .pdp-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,.88);
            z-index: 3500; display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: opacity .3s; padding: 20px;
        }
        .pdp-overlay.open { opacity: 1; pointer-events: all; }
        .pdp {
            background: #111; border-radius: 20px;
            width: 100%; max-width: 860px; max-height: 90vh; overflow-y: auto;
            display: grid; grid-template-columns: 1fr 1fr; position: relative;
            border: 1px solid #222;
        }
        @media (max-width: 700px) { .pdp { grid-template-columns: 1fr; } }
        .pdp-imgs { padding: 24px; display: flex; flex-direction: column; gap: 12px; }
        .pdp-main { aspect-ratio: 1; background: #0d0d0d; border-radius: 12px; overflow: hidden; position: relative; }
        .pdp-main img { width: 100%; height: 100%; object-fit: contain; padding: 8%; filter: drop-shadow(0 4px 20px rgba(0,0,0,.7)); transition: opacity .25s; }
        .pdp-thumbs { display: flex; gap: 8px; flex-wrap: wrap; }
        .pdp-thumb {
            width: 60px; height: 60px; border-radius: 8px; overflow: hidden;
            background: #0d0d0d; border: 1.5px solid #222; cursor: pointer;
            transition: border-color .2s; padding: 0; flex-shrink: 0;
        }
        .pdp-thumb.active { border-color: var(--green); }
        .pdp-thumb img { width: 100%; height: 100%; object-fit: contain; padding: 8%; }
        .pdp-info { padding: 32px 28px 32px 8px; display: flex; flex-direction: column; gap: 16px; }
        @media (max-width: 700px) { .pdp-info { padding: 0 24px 28px; } }
        .pdp-spec { font-family: 'Courier New', monospace; font-size: 8px; letter-spacing: 3px; color: rgba(45,213,18,.7); text-transform: uppercase; }
        .pdp-name { font-size: 24px; font-weight: 700; color: #f0f0f0; letter-spacing: -0.5px; }
        .pdp-price { font-family: 'Courier New', monospace; font-size: 20px; color: var(--green); letter-spacing: 1px; }
        .pdp-desc { font-size: 14px; line-height: 1.6; color: rgba(255,255,255,.5); }
        .pdp-size-label { font-family: 'Courier New', monospace; font-size: 8px; letter-spacing: 2px; color: rgba(255,255,255,.4); text-transform: uppercase; }
        .pdp-sizes { display: flex; gap: 8px; flex-wrap: wrap; }
        .pdp-sizes.shake { animation: shake .4s ease; }
        .pdp-size-btn {
            min-width: 44px; height: 44px; border-radius: 8px; padding: 0 12px;
            border: 1px solid #2a2a2a; background: transparent;
            font-family: var(--font); font-size: 13px; font-weight: 500;
            color: rgba(255,255,255,.6); cursor: pointer; transition: all .15s;
        }
        .pdp-size-btn:hover  { border-color: #444; color: #fff; }
        .pdp-size-btn.active { border-color: var(--green); background: rgba(45,213,18,.1); color: #fff; }
        .pdp-add-btn {
            height: 52px; border-radius: 26px; border: none;
            background: var(--green); color: #000;
            font-family: var(--font); font-size: 15px; font-weight: 700;
            cursor: pointer; transition: opacity .2s; margin-top: auto;
        }
        .pdp-add-btn:hover { opacity: .85; }
        .pdp-close {
            position: absolute; top: 16px; right: 16px;
            width: 36px; height: 36px; border-radius: 50%;
            border: 1px solid #2a2a2a; background: #1a1a1a;
            color: #888; font-size: 20px; line-height: 1;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
            transition: all .2s; z-index: 10;
        }
        .pdp-close:hover { border-color: var(--green); color: var(--green); }

        /* ── CHECKOUT ────────────────────────────────────────────────── */
        .checkout-overlay {
            position: fixed; inset: 0; background: #0a0a0a;
            z-index: 4000; overflow-y: auto;
            opacity: 0; pointer-events: none; transition: opacity .3s;
        }
        .checkout-overlay.open { opacity: 1; pointer-events: all; }
        .checkout-wrap {
            max-width: 1000px; margin: 0 auto;
            padding: 32px 20px 80px; display: grid;
            grid-template-columns: 1fr 360px; gap: 40px; align-items: start;
        }
        @media (max-width: 768px) { .checkout-wrap { grid-template-columns: 1fr; } }
        .checkout-back {
            display: flex; align-items: center; gap: 8px;
            background: transparent; border: none; color: rgba(255,255,255,.5);
            font-family: 'Courier New', monospace; font-size: 9px; letter-spacing: 2px;
            text-transform: uppercase; cursor: pointer; margin-bottom: 24px;
            transition: color .2s; padding: 0;
        }
        .checkout-back:hover { color: #fff; }
        .checkout-steps {
            display: flex; align-items: center; gap: 8px; margin-bottom: 32px;
        }
        .co-step-ind {
            width: 28px; height: 28px; border-radius: 50%;
            border: 1px solid #2a2a2a; background: transparent;
            font-family: 'Courier New', monospace; font-size: 10px;
            color: rgba(255,255,255,.3); display: flex; align-items: center; justify-content: center;
            transition: all .3s;
        }
        .co-step-ind.active { border-color: var(--green); color: var(--green); background: rgba(45,213,18,.08); }
        .co-step-ind.done { border-color: var(--green); background: var(--green); color: #000; }
        .co-step-line { flex: 1; height: 1px; background: #1f1f1f; }
        .checkout-title { font-size: 22px; font-weight: 700; color: #f0f0f0; margin-bottom: 24px; }
        .co-step { display: none; }
        .co-step.active { display: block; }
        .co-field-group { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px; }
        .co-field-group.full { grid-template-columns: 1fr; }
        .co-field { display: flex; flex-direction: column; gap: 6px; }
        .co-field label { font-family: 'Courier New', monospace; font-size: 8px; letter-spacing: 2px; color: rgba(255,255,255,.4); text-transform: uppercase; }
        .co-field input {
            height: 44px; padding: 0 14px; border-radius: 8px;
            border: 1px solid #222; background: #111; color: #e0e0e0;
            font-family: var(--font); font-size: 14px;
            transition: border-color .2s; outline: none;
        }
        .co-field input:focus { border-color: rgba(45,213,18,.5); }
        .co-field input.error { border-color: #ff4444; }
        .co-next-btn {
            height: 52px; width: 100%; border-radius: 26px; border: none;
            background: var(--green); color: #000;
            font-family: var(--font); font-size: 15px; font-weight: 700;
            cursor: pointer; margin-top: 20px; transition: opacity .2s;
        }
        .co-next-btn:hover { opacity: .85; }
        /* card icons */
        .co-card-row { position: relative; }
        .co-card-icons { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); display: flex; gap: 4px; pointer-events: none; }
        .co-card-icon { width: 28px; height: 18px; border-radius: 3px; background: #2a2a2a; display: flex; align-items: center; justify-content: center; font-size: 8px; color: rgba(255,255,255,.4); }
        /* order summary sidebar */
        .co-summary {
            background: #111; border-radius: 16px;
            border: 1px solid #1f1f1f; padding: 24px;
            position: sticky; top: 32px;
        }
        .co-summary-title { font-family: 'Courier New', monospace; font-size: 8px; letter-spacing: 3px; color: rgba(255,255,255,.4); text-transform: uppercase; margin-bottom: 20px; }
        .co-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .co-item span:first-child { font-size: 13px; color: rgba(255,255,255,.7); }
        .co-item span:last-child { font-family: 'Courier New', monospace; font-size: 12px; color: #e0e0e0; }
        .co-divider { height: 1px; background: #1f1f1f; margin: 16px 0; }
        .co-totals .co-item span { font-size: 12px; color: rgba(255,255,255,.4); font-family: 'Courier New', monospace; }
        .co-totals .co-item.grand span { font-size: 15px; color: var(--green); font-weight: 700; }
        /* confirmation */
        .co-confirm {
            text-align: center; padding: 60px 20px;
            display: flex; flex-direction: column; align-items: center; gap: 16px;
        }
        .co-confirm-icon { font-size: 48px; }
        .co-confirm h2 { font-size: 28px; font-weight: 700; color: var(--green); }
        .co-confirm p { font-size: 15px; color: rgba(255,255,255,.5); max-width: 400px; line-height: 1.6; }
        .co-confirm-num { font-family: 'Courier New', monospace; font-size: 11px; letter-spacing: 3px; color: rgba(45,213,18,.5); }
        .co-continue-btn {
            height: 48px; padding: 0 32px; border-radius: 24px; border: 1px solid #333;
            background: transparent; color: rgba(255,255,255,.7);
            font-family: var(--font); font-size: 14px; cursor: pointer;
            margin-top: 8px; transition: all .2s;
        }
        .co-continue-btn:hover { border-color: var(--green); color: var(--green); }

        /* Mobile */
        @media (max-width: 900px) {
            .shop-wrap { padding: 0 8px 60px; }
            .shop-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
            .shop-hd { padding: 24px 0 10px; }
        }
        @media (max-width: 600px) {
            .shop-wrap { padding: 0 6px 60px; }
            .shop-grid { gap: 8px; }
            .shop-filter-btn { height: 36px; padding: 0 14px; font-size: 14px; }
        }

        /* ── CONTACT ──────────────────────────────────────────────── */
        .contact-wrap {
            max-width: 480px;
            margin: 0 auto;
            padding: 0 20px;
            min-height: calc(100vh - var(--nav-h));
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .contact-wrap h2 {
            font-size: 32px;
            font-weight: 300;
            letter-spacing: -1px;
            margin-bottom: 32px;
            text-align: center;
        }
        .contact-form { display: flex; flex-direction: column; gap: 20px; }

        .form-field input,
        .form-field textarea {
            width: 100%;
            padding: 14px 0;
            background: transparent;
            border: none;
            border-bottom: 1.5px solid var(--g2);
            font-size: 16px;
            font-family: var(--font);
            color: var(--black);
            outline: none;
            transition: border-color .2s;
        }
        .form-field input:focus,
        .form-field textarea:focus { border-bottom-color: var(--black); }
        .form-field input::placeholder,
        .form-field textarea::placeholder { color: var(--g3); }
        .form-field textarea { resize: vertical; min-height: 120px; }

        .submit-btn {
            align-self: center;
            padding: 14px 36px;
            background: var(--black);
            color: #fff;
            border: none;
            border-radius: 30px;
            font-size: 14px;
            font-weight: 500;
            letter-spacing: .5px;
            transition: background .2s, transform .2s;
            margin-top: 8px;
        }
        .submit-btn:hover { background: var(--green); color: #000; transform: translateY(-2px); }


        /* ── TOAST ────────────────────────────────────────────────── */
        .toast-area {
            position: fixed;
            top: 86px; right: 18px;
            z-index: 6000;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .toast {
            background: var(--green);
            color: #fff;
            padding: 13px 18px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 9px;
            font-size: 14px;
            font-weight: 600;
            min-width: 200px;
            box-shadow: 0 8px 28px rgba(45,213,18,.35);
            animation: toastIn .3s cubic-bezier(.34,1.56,.64,1);
        }
        .toast.out { animation: toastOut .25s ease forwards; }
        @keyframes toastIn  { from{opacity:0;transform:translateX(50px)} to{opacity:1;transform:translateX(0)} }
        @keyframes toastOut { to  {opacity:0;transform:translateX(50px)} }

        /* ── BACK TO TOP ──────────────────────────────────────────── */
        .back-top {
            position: fixed;
            bottom: 28px; right: 28px;
            width: 46px; height: 46px;
            background: #fff;
            border: 1px solid var(--g2);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 16px rgba(0,0,0,.1);
            opacity: 0; visibility: hidden;
            transform: translateY(10px);
            transition: all .3s cubic-bezier(.34,1.56,.64,1);
            z-index: 900;
            color: var(--black);
        }
        .back-top.show { opacity: 1; visibility: visible; transform: translateY(0); }
        .back-top:hover { background: var(--green); color: #000; transform: translateY(-4px); }

        @media (max-width: 768px) { .back-top { bottom: 18px; right: 18px; } }

        /* ── LOADER ──────────────────────────────────────────────── */
        .loader {
            position: fixed; inset: 0;
            background: #000;
            z-index: 99999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', Courier, monospace;
            color: #fff;
            transition: opacity .8s ease, visibility .8s ease;
        }
        .loader.done { opacity: 0; visibility: hidden; pointer-events: none; }

        .ldr-inner { width: min(480px, 88vw); }

        .ldr-brand {
            font-size: 10px;
            letter-spacing: 4px;
            color: rgba(255,255,255,.3);
            margin-bottom: 40px;
            text-transform: uppercase;
        }

        .ldr-divider {
            height: 1px;
            background: rgba(255,255,255,.1);
            margin-bottom: 32px;
        }

        .ldr-lines {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 44px;
        }
        .ldr-line {
            font-size: 10px;
            letter-spacing: 2px;
            color: rgba(255,255,255,.35);
            display: flex;
            gap: 10px;
            opacity: 0;
            transition: opacity .5s ease;
        }
        .ldr-line.show { opacity: 1; }
        .ldr-prompt { color: #2DD512; }

        .ldr-counter-row {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 10px;
        }
        .ldr-status-txt {
            font-size: 9px;
            letter-spacing: 2.5px;
            color: rgba(255,255,255,.35);
        }
        .ldr-count-num {
            font-size: 52px;
            font-weight: 700;
            letter-spacing: -3px;
            line-height: 1;
            color: #fff;
            font-variant-numeric: tabular-nums;
        }
        .ldr-pct { font-size: 18px; color: rgba(255,255,255,.35); }

        .ldr-track {
            height: 1px;
            background: rgba(255,255,255,.08);
            position: relative;
            overflow: visible;
        }
        .ldr-fill {
            position: absolute;
            top: 0; left: 0;
            height: 100%;
            width: 0%;
            background: #fff;
            transition: width .12s ease-out;
        }
        .ldr-bottom {
            display: flex;
            justify-content: space-between;
            margin-top: 18px;
            font-size: 8px;
            letter-spacing: 2px;
            color: rgba(255,255,255,.18);
            text-transform: uppercase;
        }

        /* ── HERO / RAVISAUCE LAB ────────────────────────────────── */
        .hero {
            position: relative;
            height: 100vh;
            height: 100svh;
            margin-top: calc(-1 * (var(--nav-h) + 4px));
            margin-left: -18px;
            margin-right: -18px;
            overflow: hidden;
            background: #060606;
            background-image: radial-gradient(circle, rgba(255,255,255,.032) 1px, transparent 1px);
            background-size: 28px 28px;
            font-family: 'Courier New', Courier, monospace;
        }

        /* ── PANELS ── */
        .hud-panel {
            position: absolute;
            overflow: hidden;
            background: #0c0c0c;
            border: 1px solid rgba(255,255,255,.09);
            border-radius: var(--r);
            box-shadow: 0 0 0 1px rgba(255,255,255,.04), 0 24px 64px rgba(0,0,0,.75);
            opacity: 0;
            transform: scale(0.96);
            transition: opacity 0.85s ease, transform 0.85s ease;
        }
        .hud-panel.panel-in {
            opacity: 1;
            transform: scale(1);
        }
        /* Panel positions set by JS on desktop */

        /* ── PANEL VIDEOS ── */
        .hud-vid {
            position: absolute;
            top: -5%; left: -5%;
            width: 110%; height: 110%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 1.6s ease;
        }
        .hud-vid.playing { opacity: 1; }
        .hud-vid-main { object-position: 50% 40%; }
        .hud-vid-pa   { object-position: 20% 30%; }
        .hud-vid-pb   { object-position: 70% 20%; }
        .hud-vid-pc   { object-position: 80% 65%; }
        .hud-vid-pd   { object-position: 35% 75%; }
        .hud-vid-pg   { object-fit: contain; background: #000; }

        /* ── SCAN LINE (moves top → bottom, different timing per panel) ── */
        @keyframes scan {
            0%   { top: -2px; opacity: 0; }
            4%   { opacity: 1; }
            96%  { opacity: .5; }
            100% { top: 100%; opacity: 0; }
        }
        .scan-line {
            position: absolute;
            left: 0; right: 0; top: 0;
            height: 1px;
            background: linear-gradient(to right, transparent 0%, rgba(45,213,18,.2) 50%, transparent 100%);
            animation: scan 7s linear infinite;
            pointer-events: none;
            z-index: 6;
        }
        .hud-pa   .scan-line { animation-delay:  0s;    }
        .hud-pb   .scan-line { animation-delay: -1.4s;  }
        .hud-pc   .scan-line { animation-delay: -3.5s;  }
        .hud-pd   .scan-line { animation-delay: -5.1s;  }
        .hud-pe   .scan-line { animation-delay: -4.2s;  }
        .hud-pf   .scan-line { animation-delay: -6.3s;  }
        .hud-pg   .scan-line { animation-delay: -2.7s;  }
        .hud-main .scan-line { animation-delay: -2.6s;  }

        /* ── PANEL UI LAYER (corners, label, specimen tag) ── */
        .panel-ui {
            position: absolute; inset: 0;
            pointer-events: none; z-index: 7;
        }
        .p-corner { display: none; }
        .hud-spec { display: none; }
        .panel-label {
            position: absolute;
            bottom: 0; left: 0; right: 0;
            height: 28px;
            background: rgba(0,0,0,.65);
            backdrop-filter: blur(8px);
            border-top: 1px solid rgba(255,255,255,.06);
            display: flex; align-items: center;
            padding: 0 9px; gap: 7px;
        }
        .pl-dot {
            width: 5px; height: 5px;
            background: var(--green); border-radius: 50%;
            animation: pulse 1.8s ease-in-out infinite;
            flex-shrink: 0;
        }
        .pl-id   { font-size: 7px; letter-spacing: 2px; color: rgba(255,255,255,.4); }
        .pl-time { margin-left: auto; font-size: 7px; letter-spacing: 1px; color: rgba(255,255,255,.22); }

        /* ── SCREEN CORNER COORDS ── */
        .hud-corner    { display: none; }
        .hud-circle {
            width: 12px; height: 12px;
            border: 1px solid rgba(255,255,255,.22); border-radius: 50%; flex-shrink: 0;
        }
        .hud-xbox {
            width: 12px; height: 12px;
            border: 1px solid rgba(255,255,255,.22);
            position: relative; flex-shrink: 0;
        }
        .hud-xbox::before, .hud-xbox::after {
            content: ''; position: absolute; top: 50%; left: 50%;
            width: 6px; height: 1px; background: rgba(255,255,255,.28);
        }
        .hud-xbox::before { transform: translate(-50%,-50%) rotate(45deg); }
        .hud-xbox::after  { transform: translate(-50%,-50%) rotate(-45deg); }

        /* ── METADATA TEXT ── */
        .hud-meta { display: none; }

        /* ── SIDEBAR ── */
        .hud-sidebar {
            position: absolute; left: 2%; bottom: 12vh;
            font-size: 7.5px; letter-spacing: 1.5px; line-height: 2.1;
            color: rgba(255,255,255,.2);
            pointer-events: none; z-index: 0;
        }
        .hud-sidebar-sep { opacity: .2; }

        /* ── AMBIENT LAB TEXT ── */
        .hud-ambient {
            position: absolute;
            font-family: 'Courier New', Courier, monospace;
            font-size: 7px; letter-spacing: 1.5px; line-height: 2;
            color: rgba(255,255,255,.15);
            pointer-events: none; z-index: 0;
            text-transform: uppercase;
        }
        .hud-amb-g   { color: rgba(45,213,18,.30); }
        .hud-amb-sep { opacity: .25; display: block; margin: 2px 0; }
        /* Left-side only — both start below the nav bar */
        .hud-amb-tl  { top: calc(var(--nav-h) + 10px); left: 2%; }
        .hud-amb-ml  { top: 50%; left: 2%; transform: translateY(-50%); }

        /* ── STORY BACKGROUND TEXT ── */
        .hud-story {
            position: absolute;
            top: calc(var(--nav-h) + 6px);
            left: 0; right: 0;
            bottom: 8vh;
            overflow: hidden;
            font-family: 'Courier New', Courier, monospace;
            font-size: 6.5px;
            letter-spacing: 1.2px;
            line-height: 2.2;
            color: rgba(255,255,255,.052);
            pointer-events: none;
            z-index: 0;
            text-transform: uppercase;
            padding: 0 1.5%;
            column-count: 4;
            column-gap: 1.5%;
        }

        /* ── CORNER X DECO ── */
        .hud-x-deco {
            position: absolute; width: 16px; height: 16px;
            border: 1px solid rgba(255,255,255,.1);
            display: flex; align-items: center; justify-content: center;
            font-size: 7px; color: rgba(255,255,255,.14);
            pointer-events: none; z-index: 0;
        }
        .hud-x-bl { left: 2%;  bottom: calc(7vh + 3px); }
        .hud-x-br { right: 3%; bottom: calc(7vh + 3px); }

        /* ── BOTTOM STATUS BAR ── */
        .hud-bar {
            position: absolute; bottom: 0; left: 0; right: 0;
            height: 7vh; max-height: 52px; min-height: 38px;
            display: flex; align-items: center;
            border-top: 1px solid rgba(255,255,255,.07);
            font-size: 8.5px; letter-spacing: 2px; overflow: hidden;
            background: rgba(4,4,4,.9); backdrop-filter: blur(12px);
            z-index: 10;
        }
        .hud-bar-seg {
            height: 100%; display: flex; align-items: center;
            padding: 0 18px; border-right: 1px solid rgba(255,255,255,.06);
            white-space: nowrap; color: rgba(255,255,255,.35);
        }
        .hud-bar-path    { color: rgba(255,255,255,.25); }
        .hud-bar-plus    { color: rgba(255,255,255,.14); padding: 0 10px; }
        .hud-bar-project { color: rgba(255,255,255,.62); flex: 1; letter-spacing: 2.5px; }
        .hud-bar-tags    { color: rgba(255,255,255,.2); }
        .hud-bar-next    { color: rgba(255,255,255,.35); }
        .hud-bar-count   { color: rgba(255,255,255,.22); border-right: none; }
        .hud-plus        { display: none; }

        /* ── DESKTOP DRAG HINT ── */
        @media (hover: hover) and (min-width: 901px) {
            .hud-panel { cursor: grab; }
            .hud-panel.panel-in { transition: box-shadow .2s; }
            .hud-panel.dragging { cursor: grabbing; box-shadow: 0 0 0 2px rgba(255,255,255,.2), 0 32px 80px rgba(0,0,0,.9); transition: none; }
        }

        /* ── RESIZE HANDLES — invisible hit areas, cursor only ── */
        .resize-handle {
            position: absolute; width: 20px; height: 20px;
            z-index: 9; background: transparent;
        }
        .resize-handle[data-dir="se"] { bottom: 0; right: 0; cursor: se-resize; }
        .resize-handle[data-dir="sw"] { bottom: 0; left:  0; cursor: sw-resize; }
        .resize-handle[data-dir="ne"] { top:    0; right: 0; cursor: ne-resize; }
        .resize-handle[data-dir="nw"] { top:    0; left:  0; cursor: nw-resize; }

        /* ── MOBILE ── */
        @media (max-width: 900px) {
            /* Hide desktop-only panels + text overlays */
            .hud-pc, .hud-pd, .hud-pe, .hud-pf, .hud-pg,
            .hud-sidebar, .hud-x-bl, .hud-x-br,
            .hud-ambient, .hud-story { display: none; }

            /* CSS-positioned panels — JS skips place() on mobile */
            .hud-main {
                top: calc(var(--nav-h) + 6px);
                left: 6%; width: 82%; height: 63%;
                z-index: 1;
            }
            .hud-pa {
                top: calc(var(--nav-h) + 22px);
                left: 4%; width: 46%; height: 37%;
                z-index: 4;
            }
            .hud-pb {
                top: 53%; left: 49%;
                width: 45%; height: 33%;
                z-index: 4;
            }
        }
        @media (max-width: 600px) {
            .hud-bar-tags, .hud-bar-count { display: none; }
            .hud-bar-seg { font-size: 7px; padding: 0 10px; letter-spacing: 1px; }
        }

        /* ── HEADER OVER DARK HERO ─────────────────────────────── */
        .header.hero-mode {
            background: transparent !important;
            border-bottom-color: transparent !important;
            box-shadow: none !important;
        }
        .header.hero-mode .logo img       { filter: brightness(0) invert(1); }
        .header.hero-mode .nav-tab        { color: rgba(255,255,255,.55); }
        .header.hero-mode .nav-tab:hover  { background: rgba(255,255,255,.1); color: #fff; }
        .header.hero-mode .nav-tab.active { background: rgba(255,255,255,.18); color: #fff; }
        .header.hero-mode .h-line         { background: #fff; }

        /* ══════════════════════════════════════════════════════
           DARK MODE — entire site
        ══════════════════════════════════════════════════════ */
        body             { background: #0a0a0a; color: #d0d0d0; }

        .header          { background: #0a0a0a; border-bottom-color: #1c1c1c; }
        .header.scrolled { background: rgba(8,8,8,.97); box-shadow: 0 1px 16px rgba(0,0,0,.6); border-bottom-color: transparent; }

        .nav-tab          { color: #555; }
        .nav-tab:hover    { background: #1a1a1a; color: #d0d0d0; }
        .nav-tab.active   { background: #d0d0d0; color: #0a0a0a; }

        .h-line           { background: #d0d0d0; }

        .pin {
            background: linear-gradient(90deg, #181818 25%, #212121 50%, #181818 75%);
            background-size: 200% 100%;
        }
        .pin.loaded { background: none; animation: none; }

        .coming-soon h1 { color: #d0d0d0; }
        .coming-soon p  { color: #555; }
        .cs-bar-wrap    { background: #1a1a1a; }
        .cs-hint        { color: #333; }

        /* shop is always light — no dark overrides needed */

        .contact-wrap h2 { color: #d0d0d0; }
        .form-field input, .form-field textarea { color: #d0d0d0; border-bottom-color: #2a2a2a; }
        .form-field input:focus, .form-field textarea:focus { border-bottom-color: #555; }
        .form-field input::placeholder, .form-field textarea::placeholder { color: #3a3a3a; }
        .submit-btn       { background: #d0d0d0; color: #0a0a0a; }
        .submit-btn:hover { background: var(--green); color: #000; }

        .saved-empty h3   { color: #d0d0d0; }
        .saved-empty p    { color: #555; }
        .browse-link      { background: #d0d0d0; color: #0a0a0a; }
        .browse-link:hover { background: var(--green); color: #000; }

        .back-top         { background: #111; border-color: #222; color: #d0d0d0; }
        .back-top:hover   { background: var(--green); color: #000; }
    </style>
</head>
<body>

<!-- LOADER -->
<div id="loader" class="loader">
    <div class="ldr-inner">
        <div class="ldr-brand">RaviSauce &nbsp;—&nbsp; Creative Studio</div>
        <div class="ldr-divider"></div>
        <div class="ldr-lines">
            <div class="ldr-line" id="ldr-l1"><span class="ldr-prompt">›</span><span>SYSTEM BOOT INITIATED</span></div>
            <div class="ldr-line" id="ldr-l2"><span class="ldr-prompt">›</span><span>LOADING CREATIVE ASSETS</span></div>
            <div class="ldr-line" id="ldr-l3"><span class="ldr-prompt">›</span><span>MOUNTING INTERFACE</span></div>
        </div>
        <div class="ldr-counter-row">
            <span class="ldr-status-txt" id="ldr-status">INITIALIZING</span>
            <div><span class="ldr-count-num" id="ldr-count">000</span><span class="ldr-pct">%</span></div>
        </div>
        <div class="ldr-track"><div class="ldr-fill" id="ldr-fill"></div></div>
        <div class="ldr-bottom">
            <span>RS — LABS</span>
            <span id="ldr-date"></span>
        </div>
    </div>
</div>

<!-- HEADER -->
<header class="header" id="header">
    <div class="logo-wrap">
        <button class="logo" onclick="showPage('home')" aria-label="Home">
            <img src="https://i.imgur.com/CsYuIfd.png" alt="Ravi Sauce">
        </button>
    </div>

    <nav class="nav-tabs">
        <button class="nav-tab active" data-page="home"    onclick="showPage('home')">Home</button>
        <button class="nav-tab"        data-page="saved"   onclick="showPage('saved')">Saved</button>
        <button class="nav-tab"        data-page="shop"    onclick="showPage('shop')">Shop</button>
        <button class="nav-tab"        data-page="contact" onclick="showPage('contact')">Contact</button>
    </nav>

    <button class="cart-btn" id="cart-btn" onclick="openCart()" aria-label="Cart">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 01-8 0"/></svg>
        <span>Cart</span>
        <span class="cart-badge" id="cart-badge"></span>
    </button>

    <button class="mobile-toggle" id="mob-toggle" onclick="openMobileMenu()" aria-label="Menu">
        <span class="h-line"></span>
        <span class="h-line"></span>
        <span class="h-line"></span>
    </button>
</header>

<!-- MOBILE MENU -->
<div class="mob-menu" id="mob-menu">
    <div class="mob-head">
        <span class="mob-id">RAV — ACCESS</span>
        <button class="mob-close" onclick="closeMobileMenu()" aria-label="Close">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
                <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        </button>
    </div>
    <div class="mob-items">
        <button class="mob-item" data-page="home"    onclick="mobileNav('home')">   <span class="mob-num">01</span><span class="mob-label">HOME</span></button>
        <button class="mob-item" data-page="saved"   onclick="mobileNav('saved')">  <span class="mob-num">02</span><span class="mob-label">SAVED</span></button>
        <button class="mob-item" data-page="shop"    onclick="mobileNav('shop')">   <span class="mob-num">03</span><span class="mob-label">SHOP</span></button>
        <button class="mob-item" data-page="contact" onclick="mobileNav('contact')"><span class="mob-num">04</span><span class="mob-label">CONTACT</span></button>
    </div>
    <div class="mob-foot">
        <div class="mob-status"><span class="status-dot"></span><span>SYSTEM ONLINE</span></div>
        <span style="font-size:10px;color:#444;font-family:'Courier New',monospace;">THE MOON</span>
    </div>
</div>
<div class="mob-backdrop" id="mob-backdrop" onclick="closeMobileMenu()"></div>

<!-- MAIN -->
<main class="main">

    <!-- HOME -->
    <div id="home-page" class="page active">

        <!-- RAVISAUCE LAB — HERO -->
        <div class="hero" id="hero-section">

            <!-- ── PANEL PA ── -->
            <div class="hud-panel hud-pa">
                <video autoplay muted loop playsinline class="hud-vid hud-vid-pa">
                    <source src="videos/flag-loop.mp4?feed=a" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—A</span>
                    </div>
                </div>
            </div>

            <!-- ── PANEL PB ── -->
            <div class="hud-panel hud-pb">
                <video autoplay muted loop playsinline class="hud-vid hud-vid-pb">
                    <source src="videos/rock-loop.mp4?feed=b" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—B</span>
                    </div>
                </div>
            </div>

            <!-- ── PANEL PC ── -->
            <div class="hud-panel hud-pc">
                <video autoplay muted loop playsinline class="hud-vid hud-vid-pc">
                    <source src="videos/astro-final.mp4?feed=c" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—C</span>
                    </div>
                </div>
            </div>

            <!-- ── PANEL PD ── -->
            <div class="hud-panel hud-pd">
                <video autoplay muted loop playsinline class="hud-vid hud-vid-pd">
                    <source src="videos/animation-reel.mp4?feed=d" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—D</span>
                    </div>
                </div>
            </div>

            <!-- ── PANEL PE ── -->
            <div class="hud-panel hud-pe">
                <video autoplay muted loop playsinline class="hud-vid hud-vid-pe">
                    <source src="videos/rock-loop.mp4?feed=e" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—E</span>
                    </div>
                </div>
            </div>

            <!-- ── PANEL PF ── -->
            <div class="hud-panel hud-pf">
                <video autoplay muted loop playsinline class="hud-vid hud-vid-pf">
                    <source src="videos/astro-final.mp4?feed=f" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—F</span>
                    </div>
                </div>
            </div>

            <!-- ── PANEL MAIN ── -->
            <div class="hud-panel hud-pg">
                <video autoplay muted loop playsinline preload="auto" class="hud-vid hud-vid-pg">
                    <source src="videos/ravi-new.mp4?feed=g" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—G / FEED 07</span>
                    </div>
                </div>
            </div>

            <div class="hud-panel hud-main">
                <video class="hud-vid hud-vid-main" id="hero-video" autoplay muted loop playsinline preload="auto">
                    <source src="videos/animation-reel.mp4" type="video/mp4">
                </video>
                <div class="scan-line"></div>
                <div class="panel-ui">
                    <div class="panel-label">
                        <span class="pl-dot"></span>
                        <span class="pl-id">CAM—MAIN / PRIMARY FEED</span>
                    </div>
                </div>
            </div>

            <!-- STORY BACKGROUND FILL TEXT -->
            <div class="hud-story">WE ARE WANDERING — DRIFTING THROUGH A UNIVERSE SO VAST AND INDIFFERENT THAT THE MIND CANNOT HOLD IT — AND YET HERE WE ARE — CONSCIOUS — AWAKE — ASKING QUESTIONS THAT HAVE NO CEILING — WHAT IS REALITY — IS THIS ALL THERE IS — OR IS THERE SOMETHING DEEPER BENEATH THE SURFACE OF EVERYTHING WE THINK WE KNOW — WE ARE FLOATING ON A ROCK — A WET SPINNING ROCK HURTLING THROUGH THE DARK AT THOUSANDS OF MILES PER HOUR — AND NOBODY TOLD US — AND SOMEHOW THAT IS BOTH TERRIFYING AND BEAUTIFUL — BECAUSE IT MEANS WE ARE FREE — FREE TO WONDER — FREE TO BUILD — FREE TO CREATE SOMETHING OUT OF NOTHING — THIS IS WHY RAVI SAUCE EXISTS — NOT BECAUSE THE WORLD NEEDED ANOTHER BRAND — BUT BECAUSE SOMETHING INSIDE WOULD NOT STAY QUIET — A VOICE THAT SAID LOOK CLOSER — TOUCH THE MATERIAL — FEEL THE WEIGHT OF IT — WHAT ARE WE MADE OF — CARBON AND MEMORY AND UNEXPLAINED LONGING — WE ARE STARDUST WEARING CLOTHES AND WONDERING WHAT COMES NEXT — CONSCIOUSNESS IS THE STRANGEST THING IN THE OBSERVABLE UNIVERSE — NOTHING ELSE KNOWS THAT IT EXISTS — NOTHING ELSE LOOKS UP AT THE NIGHT SKY AND FEELS SMALL — WE DO — AND THAT SMALLNESS IS WHERE EVERYTHING INTERESTING BEGINS — RAVI SAUCE IS AN EXPERIMENT — A LABORATORY OF FEELING — WHAT HAPPENS WHEN YOU TAKE THAT COSMIC UNCERTAINTY AND STITCH IT INTO FABRIC — WHEN YOU PRESS IT INTO MATERIAL — WHEN YOU MAKE IT WEARABLE — WHEN YOU MAKE IT REAL — THE FUTURE IS NOT A DESTINATION — IT IS A DIRECTION — AND WE ARE WALKING TOWARD IT — SLOWLY — CAREFULLY — WITH OUR HANDS FULL OF IDEAS AND OUR EYES OPEN WIDE — WHAT DOES IT MEAN TO BE ALIVE IN THIS CENTURY — TO HOLD A DEVICE THAT CONTAINS ALL OF HUMAN KNOWLEDGE — AND STILL NOT KNOW WHAT TO DO WITH A TUESDAY AFTERNOON — THERE IS A GAP BETWEEN INFORMATION AND MEANING — AND RAVI SAUCE LIVES IN THAT GAP — WE ARE NOT TRYING TO ANSWER THE BIG QUESTIONS — WE ARE TRYING TO MAKE SOMETHING WORTHY OF THEM — THE FIBONACCI SEQUENCE IS NOT JUST A NUMBER PATTERN — IT IS THE UNIVERSE SHOWING OFF — LOOK AT THE SHELL — LOOK AT THE SUNFLOWER — LOOK AT THE HURRICANE — THE SAME LOGIC EVERYWHERE — ORDER INSIDE THE CHAOS — BEAUTY INSIDE THE MATHEMATICS — WE SEE IT AND WE WANT TO TOUCH IT — WE WANT TO WEAR IT — BECAUSE TO WEAR SOMETHING IS TO CARRY IT — TO CARRY A PHILOSOPHY — TO CARRY A QUESTION — TO WALK THROUGH THE WORLD AS A MOVING ARGUMENT FOR CURIOSITY — WHAT IS TIME — A RIVER OR A ROOM — ARE WE MOVING THROUGH IT OR IS IT MOVING THROUGH US — NOBODY KNOWS — AND THAT NOT KNOWING IS THE MOST HUMAN THING THERE IS — THE UNIVERSE IS 13.8 BILLION YEARS OLD — THE EARTH IS 4.5 BILLION — HOMO SAPIENS HAVE BEEN HERE FOR 300,000 YEARS — WRITING EXISTS FOR 5,000 — EVERYTHING WE CALL CIVILIZATION IS AN EYEBLINK — A TREMBLING BRIEF IMPOSSIBLE MIRACLE — AND WE ARE IN IT RIGHT NOW — THIS MOMENT — THIS BREATH — THIS PIXEL — IS PART OF THAT MIRACLE — SO WE MAKE THINGS — BECAUSE MAKING THINGS IS HOW CONSCIOUSNESS TALKS TO THE VOID — IT SAYS I WAS HERE — I SAW THIS — I FELT SOMETHING — AND I TURNED IT INTO SOMETHING YOU COULD HOLD — RAVI SAUCE IS THAT TURNING — THAT TRANSLATION — THAT REFUSAL TO LET THE WONDER GO UNNAMED — WE EXPERIMENT BECAUSE THE ALTERNATIVE IS TO STOP ASKING — AND STOPPING ASKING IS THE ONLY REAL DEATH — THE MATERIALS WE WORK WITH ARE NOT JUST MATERIALS — THEY ARE PROXIES FOR TIME — FOR LABOR — FOR THE HUMAN HAND — FOR THE CHOICE TO MAKE RATHER THAN CONSUME — EVERY THREAD IS A DECISION — EVERY SEAM IS A COMMITMENT — EVERY PIECE IS A SMALL ACT OF DEFIANCE AGAINST A WORLD THAT WANTS YOU PASSIVE — WE ARE NOT PASSIVE — WE ARE AWAKE — WE ARE LOOKING — WE ARE ASKING — WHAT IS NEXT — WHAT IS POSSIBLE — WHAT HAVE WE NOT YET IMAGINED — THE ANSWER IS EVERYTHING — EVERYTHING IS STILL POSSIBLE — THE UNIVERSE HAS NOT FINISHED WITH US YET — AND WE HAVE NOT FINISHED WITH IT — /// WE ARE WANDERING — DRIFTING THROUGH A UNIVERSE SO VAST AND INDIFFERENT THAT THE MIND CANNOT HOLD IT — AND YET HERE WE ARE — CONSCIOUS — AWAKE — ASKING QUESTIONS THAT HAVE NO CEILING — WHAT IS REALITY — IS THIS ALL THERE IS — OR IS THERE SOMETHING DEEPER BENEATH THE SURFACE OF EVERYTHING WE THINK WE KNOW — WE ARE FLOATING ON A ROCK — A WET SPINNING ROCK HURTLING THROUGH THE DARK AT THOUSANDS OF MILES PER HOUR — AND NOBODY TOLD US — AND SOMEHOW THAT IS BOTH TERRIFYING AND BEAUTIFUL — BECAUSE IT MEANS WE ARE FREE — FREE TO WONDER — FREE TO BUILD — FREE TO CREATE SOMETHING OUT OF NOTHING — THIS IS WHY RAVI SAUCE EXISTS — NOT BECAUSE THE WORLD NEEDED ANOTHER BRAND — BUT BECAUSE SOMETHING INSIDE WOULD NOT STAY QUIET — A VOICE THAT SAID LOOK CLOSER — TOUCH THE MATERIAL — FEEL THE WEIGHT OF IT — WHAT ARE WE MADE OF — CARBON AND MEMORY AND UNEXPLAINED LONGING — WE ARE STARDUST WEARING CLOTHES AND WONDERING WHAT COMES NEXT — CONSCIOUSNESS IS THE STRANGEST THING IN THE OBSERVABLE UNIVERSE — NOTHING ELSE KNOWS THAT IT EXISTS — NOTHING ELSE LOOKS UP AT THE NIGHT SKY AND FEELS SMALL — WE DO — AND THAT SMALLNESS IS WHERE EVERYTHING INTERESTING BEGINS — RAVI SAUCE IS AN EXPERIMENT — A LABORATORY OF FEELING — WHAT HAPPENS WHEN YOU TAKE THAT COSMIC UNCERTAINTY AND STITCH IT INTO FABRIC — WHEN YOU PRESS IT INTO MATERIAL — WHEN YOU MAKE IT WEARABLE — WHEN YOU MAKE IT REAL — THE FUTURE IS NOT A DESTINATION — IT IS A DIRECTION — AND WE ARE WALKING TOWARD IT — SLOWLY — CAREFULLY — WITH OUR HANDS FULL OF IDEAS AND OUR EYES OPEN WIDE — WHAT DOES IT MEAN TO BE ALIVE IN THIS CENTURY — TO HOLD A DEVICE THAT CONTAINS ALL OF HUMAN KNOWLEDGE — AND STILL NOT KNOW WHAT TO DO WITH A TUESDAY AFTERNOON — THERE IS A GAP BETWEEN INFORMATION AND MEANING — AND RAVI SAUCE LIVES IN THAT GAP — WE ARE NOT TRYING TO ANSWER THE BIG QUESTIONS — WE ARE TRYING TO MAKE SOMETHING WORTHY OF THEM — THE FIBONACCI SEQUENCE IS NOT JUST A NUMBER PATTERN — IT IS THE UNIVERSE SHOWING OFF — LOOK AT THE SHELL — LOOK AT THE SUNFLOWER — LOOK AT THE HURRICANE — THE SAME LOGIC EVERYWHERE — ORDER INSIDE THE CHAOS — BEAUTY INSIDE THE MATHEMATICS — WE SEE IT AND WE WANT TO TOUCH IT — WE WANT TO WEAR IT — BECAUSE TO WEAR SOMETHING IS TO CARRY IT — TO CARRY A PHILOSOPHY — TO CARRY A QUESTION — TO WALK THROUGH THE WORLD AS A MOVING ARGUMENT FOR CURIOSITY — WHAT IS TIME — A RIVER OR A ROOM — ARE WE MOVING THROUGH IT OR IS IT MOVING THROUGH US — NOBODY KNOWS — AND THAT NOT KNOWING IS THE MOST HUMAN THING THERE IS — THE UNIVERSE IS 13.8 BILLION YEARS OLD — THE EARTH IS 4.5 BILLION — HOMO SAPIENS HAVE BEEN HERE FOR 300,000 YEARS — WRITING EXISTS FOR 5,000 — EVERYTHING WE CALL CIVILIZATION IS AN EYEBLINK — A TREMBLING BRIEF IMPOSSIBLE MIRACLE — AND WE ARE IN IT RIGHT NOW — THIS MOMENT — THIS BREATH — THIS PIXEL — IS PART OF THAT MIRACLE — SO WE MAKE THINGS — BECAUSE MAKING THINGS IS HOW CONSCIOUSNESS TALKS TO THE VOID — IT SAYS I WAS HERE — I SAW THIS — I FELT SOMETHING — AND I TURNED IT INTO SOMETHING YOU COULD HOLD — RAVI SAUCE IS THAT TURNING — THAT TRANSLATION — THAT REFUSAL TO LET THE WONDER GO UNNAMED — WE EXPERIMENT BECAUSE THE ALTERNATIVE IS TO STOP ASKING — AND STOPPING ASKING IS THE ONLY REAL DEATH — THE MATERIALS WE WORK WITH ARE NOT JUST MATERIALS — THEY ARE PROXIES FOR TIME — FOR LABOR — FOR THE HUMAN HAND — FOR THE CHOICE TO MAKE RATHER THAN CONSUME — EVERY THREAD IS A DECISION — EVERY SEAM IS A COMMITMENT — EVERY PIECE IS A SMALL ACT OF DEFIANCE AGAINST A WORLD THAT WANTS YOU PASSIVE — WE ARE NOT PASSIVE — WE ARE AWAKE — WE ARE LOOKING — WE ARE ASKING — WHAT IS NEXT — WHAT IS POSSIBLE — WHAT HAVE WE NOT YET IMAGINED — THE ANSWER IS EVERYTHING — EVERYTHING IS STILL POSSIBLE — THE UNIVERSE HAS NOT FINISHED WITH US YET — AND WE HAVE NOT FINISHED WITH IT —</div>

            <!-- AMBIENT LAB TEXT — left side only -->

            <!-- Top-left: identity -->
            <div class="hud-ambient hud-amb-tl">
                RAVISAUCE LABORATORIES<br>
                <span class="hud-amb-sep">───────────────────</span>
                CURIOSITY &nbsp;: [INFINITE]<br>
                SIGNAL &nbsp;&nbsp;&nbsp;&nbsp;: NATURE + ART<br>
                EST &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 2026 — EARTH
            </div>

            <!-- Mid-left: nature / fibonacci / philosophy -->
            <div class="hud-ambient hud-amb-ml">
                <span class="hud-amb-sep">— φ = 1.6180339887 —</span>
                GOLDEN RATIO<br>
                <br>
                FIBONACCI SEQUENCE<br>
                <span class="hud-amb-g">0, 1, 1, 2, 3, 5, 8, 13</span><br>
                <span class="hud-amb-g">21, 34, 55, 89 → ∞</span><br>
                <br>
                <span class="hud-amb-sep">— FOUND IN —</span>
                SHELLS &nbsp;/ GALAXIES<br>
                TREES &nbsp;&nbsp;/ DNA / YOU<br>
                <br>
                <span class="hud-amb-sep">———————————</span>
                WHAT EXISTS IS<br>
                <span class="hud-amb-g">WAITING TO BE NOTICED</span>
            </div>

            <!-- SCREEN CORNER COORDS -->
            <div class="hud-corner hud-corner-tl">
                <span>X:0166PX &nbsp;Y:0079PX</span>
                <div class="hud-circle"></div>
            </div>
            <div class="hud-corner hud-corner-tr">
                <div class="hud-xbox"></div>
                <span>X:0916PX &nbsp;Y:0077PX</span>
            </div>

            <!-- METADATA TEXT -->
            <div class="hud-meta">
                VIDEO ID / RSL 2026 / ANIMATION REEL / 5-CAM ARRAY<br>
                FRAMES 1920×1080 @ 30FPS / DROPPED 0 OF 4096<br>
                OPTIMAL RES 1920×1080@30 / 3840×2160@25<br>
                NORMALIZED 100% / LOUDNESS -25.9DB / CODEC H264
            </div>

            <!-- SIDEBAR -->
            <div class="hud-sidebar">
                <div>DATE &nbsp;: [2026.02.24]</div>
                <div>HOUR &nbsp;: [<span id="hud-clock">00:00:00</span>]</div>
                <div>FEEDS ACTIVE : [05/05]</div>
                <div class="hud-sidebar-sep">— — —</div>
                <div>DISPLAY &nbsp;: (1920×1080 @ 60HZ)</div>
                <div>LANGUAGE : [ENGLISH]</div>
            </div>

            <!-- CORNER X DECO -->
            <div class="hud-x-deco hud-x-bl">✕</div>
            <div class="hud-x-deco hud-x-br">✕</div>

            <!-- BOTTOM STATUS BAR -->
            <div class="hud-bar">
                <div class="hud-bar-seg hud-bar-path">C:\RAVISAUCE \HOME</div>
                <div class="hud-bar-seg hud-bar-plus">+</div>
                <div class="hud-bar-seg hud-bar-project">ANIMATION_REEL_2026</div>
                <div class="hud-bar-seg hud-bar-tags">PHOTOGRAPHY, MOTION, DESIGN</div>
                <div class="hud-bar-seg hud-bar-next">SCROLL &nbsp;↓</div>
                <div class="hud-bar-seg hud-bar-count">001/005</div>
            </div>

        </div>

        <div class="masonry-grid" id="home-grid"></div>
    </div>

    <!-- SAVED -->
    <div id="saved-page" class="page">
        <div class="masonry-grid" id="saved-grid"></div>
        <div class="saved-empty" id="saved-empty" style="display:none;">
            <div class="saved-empty-icon">📌</div>
            <h3>Nothing saved yet</h3>
            <p>Tap Save on any image to start your collection.</p>
            <a href="#" class="browse-link" onclick="showPage('home');return false;">Browse Work</a>
        </div>
    </div>

    <!-- SHOP -->
    <div id="shop-page" class="page">
        <div class="shop-wrap">

            <!-- HEADER -->
            <div class="shop-hd">
                <div class="shop-hd-left">
                    <span class="shop-hd-label">RSL // Specimen Catalogue</span>
                    <span class="shop-hd-title">Laboratory Store</span>
                </div>
                <span class="shop-hd-count" id="shop-count">16 specimens</span>
            </div>

            <!-- STATUS TICKER -->
            <div class="shop-status">
                <div class="shop-status-inner">
                    SYS_OK &nbsp;// &nbsp;SPECIMEN_DB <em>v2.4</em> &nbsp;// &nbsp;CONTAINMENT: <em>STABLE</em> &nbsp;// &nbsp;TEMP: <em>22.4°C</em> &nbsp;// &nbsp;UNITS ACTIVE: <em>23</em> &nbsp;// &nbsp;CATALOGUE: <em>RSL-2026</em> &nbsp;// &nbsp;STATUS: <em>OPERATIONAL</em> &nbsp;// &nbsp;LAST SYNC: <em>02:14:07</em> &nbsp;// &nbsp;INTEGRITY: <em>100%</em> &nbsp;//&nbsp;&nbsp;&nbsp;SYS_OK &nbsp;// &nbsp;SPECIMEN_DB <em>v2.4</em> &nbsp;// &nbsp;CONTAINMENT: <em>STABLE</em> &nbsp;// &nbsp;TEMP: <em>22.4°C</em> &nbsp;// &nbsp;UNITS ACTIVE: <em>23</em> &nbsp;// &nbsp;CATALOGUE: <em>RSL-2026</em> &nbsp;// &nbsp;STATUS: <em>OPERATIONAL</em> &nbsp;// &nbsp;LAST SYNC: <em>02:14:07</em> &nbsp;// &nbsp;INTEGRITY: <em>100%</em> &nbsp;//&nbsp;
                </div>
            </div>

            <!-- FILTER -->
            <div class="shop-filter">
                <button class="shop-filter-btn active" data-filter="all" onclick="filterShop('all')">All</button>
                <button class="shop-filter-btn" data-filter="tee" onclick="filterShop('tee')">Tees</button>
                <button class="shop-filter-btn" data-filter="acc" onclick="filterShop('acc')">Accessories</button>
                <button class="shop-filter-btn" data-filter="obj" onclick="filterShop('obj')">Objects</button>
            </div>

            <!-- GRID — populated by JS -->
            <div class="shop-grid" id="shop-grid"></div>

        </div><!-- /shop-wrap -->
    </div>

    <!-- CONTACT -->
    <div id="contact-page" class="page">
        <div class="contact-wrap">
            <h2>Get in touch.</h2>
            <form class="contact-form" onsubmit="handleContact(event)">
                <div class="form-field"><input type="text"  placeholder="Name"        required></div>
                <div class="form-field"><input type="email" placeholder="Email"       required></div>
                <div class="form-field"><textarea placeholder="Message..." rows="6"   required></textarea></div>
                <button type="submit" class="submit-btn">Send Message</button>
            </form>
        </div>
    </div>

</main>

<!-- PRODUCT DETAIL OVERLAY -->
<div class="pdp-overlay" id="pdp-overlay">
    <div class="pdp">
        <button class="pdp-close" onclick="closePDP()">×</button>
        <div class="pdp-imgs">
            <div class="pdp-main"><img id="pdp-main-img" src="" alt=""></div>
            <div class="pdp-thumbs" id="pdp-thumbs"></div>
        </div>
        <div class="pdp-info">
            <div class="pdp-spec" id="pdp-spec"></div>
            <h2 class="pdp-name" id="pdp-name"></h2>
            <div class="pdp-price" id="pdp-price"></div>
            <p class="pdp-desc" id="pdp-desc"></p>
            <div class="pdp-size-label">Select Size</div>
            <div class="pdp-sizes" id="pdp-sizes"></div>
            <button class="pdp-add-btn" onclick="addToCart()">Add to Cart</button>
        </div>
    </div>
</div>

<!-- CART DRAWER -->
<div class="cart-backdrop" id="cart-backdrop" onclick="closeCart()"></div>
<div class="cart-drawer" id="cart-drawer">
    <div class="cart-head">
        <span class="cart-head-title">Cart // RSL</span>
        <button class="cart-close" onclick="closeCart()">×</button>
    </div>
    <div class="cart-list" id="cart-list">
        <div class="cart-empty" id="cart-empty">No specimens selected.</div>
    </div>
    <div class="cart-footer" id="cart-footer" style="display:none">
        <div class="cart-subtotal-row"><span>SUBTOTAL</span><span id="cart-subtotal">$0</span></div>
        <div class="cart-subtotal-row"><span>SHIPPING</span><span>$12</span></div>
        <div class="cart-subtotal-row total"><span>TOTAL</span><span id="cart-total">$0</span></div>
        <button class="cart-checkout-btn" onclick="openCheckout()">Checkout</button>
    </div>
</div>

<!-- CHECKOUT -->
<div class="checkout-overlay" id="checkout-overlay">
    <div class="checkout-wrap">
        <div>
            <button class="checkout-back" onclick="closeCheckout()">← Back to cart</button>
            <div class="checkout-steps">
                <div class="co-step-ind active" id="co-ind-1">1</div>
                <div class="co-step-line"></div>
                <div class="co-step-ind" id="co-ind-2">2</div>
                <div class="co-step-line"></div>
                <div class="co-step-ind" id="co-ind-3">✓</div>
            </div>

            <!-- Step 1: Shipping -->
            <div class="co-step active" id="co-step-1">
                <div class="checkout-title">Shipping</div>
                <div class="co-field-group">
                    <div class="co-field"><label>First Name</label><input id="co-fname" type="text" placeholder="Ravi"></div>
                    <div class="co-field"><label>Last Name</label><input id="co-lname" type="text" placeholder="Sauce"></div>
                </div>
                <div class="co-field-group full">
                    <div class="co-field"><label>Email</label><input id="co-email" type="email" placeholder="ravi@ravisauce.com"></div>
                </div>
                <div class="co-field-group full">
                    <div class="co-field"><label>Address</label><input id="co-address" type="text" placeholder="123 Lab Street"></div>
                </div>
                <div class="co-field-group">
                    <div class="co-field"><label>City</label><input id="co-city" type="text" placeholder="Los Angeles"></div>
                    <div class="co-field"><label>State</label><input id="co-state" type="text" placeholder="CA"></div>
                </div>
                <div class="co-field-group">
                    <div class="co-field"><label>ZIP</label><input id="co-zip" type="text" placeholder="90001"></div>
                    <div class="co-field"><label>Country</label><input id="co-country" type="text" value="United States"></div>
                </div>
                <button class="co-next-btn" onclick="nextCheckoutStep()">Continue to Payment</button>
            </div>

            <!-- Step 2: Payment -->
            <div class="co-step" id="co-step-2">
                <div class="checkout-title">Payment</div>
                <div class="co-field-group full">
                    <div class="co-field">
                        <label>Card Number</label>
                        <div class="co-card-row">
                            <input id="co-card" type="text" placeholder="4242 4242 4242 4242" maxlength="19">
                            <div class="co-card-icons">
                                <div class="co-card-icon">VISA</div>
                                <div class="co-card-icon">MC</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="co-field-group">
                    <div class="co-field"><label>Expiry</label><input id="co-expiry" type="text" placeholder="MM/YY" maxlength="5"></div>
                    <div class="co-field"><label>CVV</label><input id="co-cvv" type="text" placeholder="123" maxlength="4"></div>
                </div>
                <div class="co-field-group full">
                    <div class="co-field"><label>Name on Card</label><input id="co-card-name" type="text" placeholder="Ravi Sauce"></div>
                </div>
                <button class="co-next-btn" onclick="nextCheckoutStep()">Place Order</button>
            </div>

            <!-- Step 3: Confirmation -->
            <div class="co-step" id="co-step-3">
                <div class="co-confirm">
                    <div class="co-confirm-icon">✦</div>
                    <h2>Order Received</h2>
                    <div class="co-confirm-num" id="co-order-num"></div>
                    <p>Your specimens are being prepared in the lab. You'll receive a confirmation email shortly.</p>
                    <button class="co-continue-btn" onclick="closeCheckout(); showPage('home')">Continue Exploring</button>
                </div>
            </div>
        </div>

        <!-- Order Summary -->
        <div class="co-summary">
            <div class="co-summary-title">Order Summary</div>
            <div id="co-items"></div>
            <div class="co-divider"></div>
            <div class="co-totals">
                <div class="co-item"><span>Subtotal</span><span id="co-subtotal">$0</span></div>
                <div class="co-item"><span>Shipping</span><span>$12</span></div>
                <div class="co-item grand"><span>Total</span><span id="co-total-val">$0</span></div>
            </div>
        </div>
    </div>
</div>

<!-- LIGHTBOX -->
<div class="lightbox" id="lightbox" onclick="handleLbClick(event)">

    <!--
        CLOSE BUTTON:
        • position:fixed  → always top-right of viewport, never moves with image
        • display:flex + align/justify:center → SVG is pixel-perfect centered
        • SVG X icon → no font-metric centering issues
    -->
    <button class="lb-close" onclick="closeLightbox()" aria-label="Close">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
    </button>

    <button class="lb-arrow prev" onclick="event.stopPropagation();stepImg(-1)" aria-label="Previous">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
            <polyline points="15 18 9 12 15 6"/>
        </svg>
    </button>

    <div class="lb-img-wrap">
        <img id="lb-img" src="" alt="">
    </div>

    <button class="lb-arrow next" onclick="event.stopPropagation();stepImg(1)" aria-label="Next">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
            <polyline points="9 18 15 12 9 6"/>
        </svg>
    </button>

</div>

<!-- BACK TO TOP -->
<button class="back-top" id="back-top" onclick="window.scrollTo({top:0,behavior:'smooth'})" aria-label="Back to top">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
        <polyline points="18 15 12 9 6 15"/>
    </svg>
</button>

<div class="toast-area" id="toast-area"></div>


<script>
// ── Images ────────────────────────────────────────────────────────
const images = [
    'images/floatingravigrey.png',
    'images/g-001.jpg',
    'images/g-002.png',
    'images/g-003.png',
    'images/g-004.png',
    'images/g-005.jpg',
    'images/g-006.jpg',  // g-040 is duplicate — removed
    'images/g-007.jpg',
    'images/g-008.png',
    'images/g-009.png',  // g-015 is duplicate — removed
    'images/g-010.jpg',
    'images/g-011.jpg',  // g-084 is duplicate — removed
    'images/g-013.jpg',
    'images/g-014.jpg',
    'images/g-016.png',
    'images/g-017.png',
    'images/g-018.jpg',  // g-031 is duplicate — removed
    'images/g-019.jpg',
    'images/g-021.png',
    'images/g-022.jpg',
    'images/g-023.jpg',
    'images/g-024.jpg',
    'images/g-025.png',
    'images/g-026.jpg',  // g-028 is duplicate — removed
    'images/g-027.jpg',  // g-087 is duplicate — removed
    'images/g-029.jpg',
    'images/g-030.jpg',
    'images/g-032.png',
    'images/g-034.jpeg',
    'images/g-035.jpg',
    'images/g-036.jpg',
    'images/g-037.jpg',
    'images/g-038.jpg',
    'images/g-039.jpg',
    'images/g-041.jpeg',
    'images/g-042.jpeg',
    'images/g-043.jpeg',
    'images/g-044.jpeg',
    'images/g-045.jpeg',
    'images/g-046.jpeg',
    'images/g-047.jpg',
    'images/g-048.jpg',
    'images/g-049.jpg',
    'images/g-050.jpg',
    'images/g-051.jpg',
    'images/g-052.jpg',
    'images/g-053.jpg',
    'images/g-054.jpg',
    'images/g-055.jpg',
    'images/g-056.jpg',
    'images/g-057.jpg',
    'images/g-058.jpg',
    'images/g-059.jpeg',
    'images/g-060.jpg',
    'images/g-061.jpg',
    'images/g-062.jpg',
    'images/g-063.jpg',
    'images/g-064.jpg',
    'images/g-065.jpg',
    'images/g-066.webp',
    'images/g-067.webp',
    'images/g-068.jpg',
    'images/g-069.jpg',
    'images/g-070.jpg',
    'images/g-071.jpg',
    'images/g-072.jpg',
    'images/g-073.jpg',
    'images/g-074.jpg',
    'images/g-075.png',
    'images/g-076.jpg',
    'images/g-077.jpg',
    'images/g-078.jpg',
    'images/g-079.png',
    'images/g-080.png',
    'images/g-081.png',
    'images/g-082.jpeg',
    'images/g-083.jpeg',
    'images/g-085.jpeg',
    'images/g-086.jpeg',
    'images/g-088.png',
    'images/g-089.jpeg',
    'images/ravi-art.png',    // g-012 is duplicate — removed
    'images/ravi-avatar.png', // g-020 is duplicate — removed
    'images/ravi-float.png',
    'images/ravi-moon.png',
    'images/ravi-print.png',  // g-033 is duplicate — removed
    'images/ravi-puffer.png',
    'images/rock4.png',
    'images/woodravi.png',
    'images/v-clip-a.gif',
    'images/v-clip-b.gif',
    'images/v-clip-c.gif',
    'images/v-animation.gif',
    'images/v-astro.gif',
    'images/v-flag.gif',
    'images/v-rock.gif',
    'images/v-ravi-new2.gif',
];

// ── Helpers ───────────────────────────────────────────────────────
function shuffle(arr) {
    const a = [...arr];
    for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
}

let shuffled = shuffle(images);
let saved    = JSON.parse(localStorage.getItem('savedPins') || '[]');

// ── Create a pin card ─────────────────────────────────────────────
function makePin(src, showSave) {
    const div = document.createElement('div');
    div.className = 'pin';
    const isSaved = saved.includes(src);
    const safe    = src.replace(/\\/g, '\\\\').replace(/'/g, "\\'");

    div.innerHTML = `
        <img data-src="${src}" alt="">
        ${showSave ? `
        <div class="pin-overlay">
            <button class="save-btn ${isSaved ? 'saved' : ''}"
                    onclick="toggleSave('${safe}',this,event)">
                ${isSaved ? 'Saved' : 'Save'}
            </button>
        </div>` : ''}
    `;

    div.addEventListener('click', e => {
        if (e.target.tagName !== 'BUTTON') openLightbox(src);
    });

    return div;
}

// ── Lazy-load observer ────────────────────────────────────────────
const isMobile = window.matchMedia('(pointer:coarse)').matches;
const pinObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (!entry.isIntersecting) return;
        const img = entry.target.querySelector('img[data-src]');
        if (!img) return;
        img.src = img.dataset.src;
        img.removeAttribute('data-src');
        img.decoding = 'async';
        img.addEventListener('load', () => {
            img.classList.add('visible');
            entry.target.classList.add('loaded');
        }, { once: true });
        img.addEventListener('error', () => entry.target.style.display = 'none', { once: true });
        pinObserver.unobserve(entry.target);
    });
}, { rootMargin: isMobile ? '150px 0px' : '400px 0px' });

// ── Render ────────────────────────────────────────────────────────
function renderHome() {
    const grid = document.getElementById('home-grid');
    grid.innerHTML = '';
    shuffled.forEach(src => {
        const pin = makePin(src, true);
        grid.appendChild(pin);
        pinObserver.observe(pin);
    });
    initTilt('home-grid');
}

function renderSaved() {
    const grid  = document.getElementById('saved-grid');
    const empty = document.getElementById('saved-empty');
    grid.innerHTML = '';

    if (saved.length === 0) {
        grid.style.display  = 'none';
        empty.style.display = 'flex';
        return;
    }

    grid.style.display  = '';
    empty.style.display = 'none';
    saved.forEach(src => {
        const pin = makePin(src, false);
        grid.appendChild(pin);
        pinObserver.observe(pin);
    });
    initTilt('saved-grid');
}

function toggleSave(src, btn, e) {
    e.stopPropagation();
    const idx = saved.indexOf(src);
    if (idx > -1) {
        saved.splice(idx, 1);
        btn.textContent = 'Save';
        btn.classList.remove('saved');
        toast('Removed from saved', '📌');
    } else {
        saved.push(src);
        btn.textContent = 'Saved';
        btn.classList.add('saved');
        toast('Saved!', '✓');
    }
    localStorage.setItem('savedPins', JSON.stringify(saved));
    renderSaved();
}

// ── Navigation ────────────────────────────────────────────────────
function showPage(page) {
    document.querySelectorAll('.nav-tab').forEach(t =>
        t.classList.toggle('active', t.dataset.page === page));
    document.querySelectorAll('.page').forEach(p =>
        p.classList.remove('active'));
    // Reset header mode when leaving/entering home
    const h = document.getElementById('header');
    if (page !== 'home') {
        h.classList.remove('hero-mode');
    }
    document.getElementById(page + '-page').classList.add('active');
    document.querySelectorAll('.mob-item').forEach(m =>
        m.classList.toggle('active', m.dataset.page === page));

    window.scrollTo({ top: 0, behavior: 'smooth' });
    window.location.hash = page;

    if (page === 'saved') renderSaved();
    if (page === 'home') setTimeout(updateHeaderMode, 50);
}

// ── Mobile menu ───────────────────────────────────────────────────
function openMobileMenu() {
    document.getElementById('mob-menu').classList.add('open');
    document.getElementById('mob-backdrop').classList.add('open');
    document.body.style.overflow = 'hidden';
}

function closeMobileMenu() {
    document.getElementById('mob-menu').classList.remove('open');
    document.getElementById('mob-backdrop').classList.remove('open');
    document.body.style.overflow = '';
}

function mobileNav(page) {
    closeMobileMenu();
    setTimeout(() => showPage(page), 280);
}

// ── Lightbox ──────────────────────────────────────────────────────
let _list = [], _idx = 0;

function preloadAdjacent() {
    [_idx - 1, _idx + 1].forEach(i => {
        if (i >= 0 && i < _list.length) new Image().src = _list[i];
    });
}

function openLightbox(src) {
    const savedPage = document.getElementById('saved-page');
    _list = savedPage.classList.contains('active') && saved.length > 0
            ? saved : shuffled;
    _idx  = _list.indexOf(src);
    if (_idx < 0) _idx = 0;

    document.getElementById('lb-img').src = src;
    document.getElementById('lightbox').classList.add('active');
    document.body.style.overflow = 'hidden';
    refreshArrows();
    preloadAdjacent();
}

function closeLightbox() {
    document.getElementById('lightbox').classList.remove('active');
    document.body.style.overflow = '';
}

function handleLbClick(e) {
    if (e.target.id === 'lightbox') closeLightbox();
}

function stepImg(dir) {
    _idx = (_idx + dir + _list.length) % _list.length;
    document.getElementById('lb-img').src = _list[_idx];
    refreshArrows();
    preloadAdjacent();
}

function refreshArrows() {
    document.querySelector('.lb-arrow.prev').style.opacity =
        _idx === 0                 ? '0.25' : '1';
    document.querySelector('.lb-arrow.next').style.opacity =
        _idx === _list.length - 1  ? '0.25' : '1';
}

// ── Shop filter ───────────────────────────────────────────────────
// ── PRODUCTS DATA ─────────────────────────────────────────────────
const PRODUCTS = [
    { id:'spx-001', spec:'SPX-001 / TEE', name:'Chill Ravi',          price:85,  cat:'tee', imgs:['store/tee-chill-white.png','store/tee-chill-white-back.png'],  desc:'The OG. Ravi in full relaxation mode. Heavyweight 100% cotton, oversized fit.', sizes:['XS','S','M','L','XL'] },
    { id:'spx-002', spec:'SPX-002 / TEE', name:'Chill Ravi — Orange',  price:85,  cat:'tee', imgs:['store/tee-chill-orange.png','store/tee-chill-orange-back.png'], desc:'Same energy, warmer colorway. Limited run on 100% organic cotton.', sizes:['XS','S','M','L','XL'] },
    { id:'spx-003', spec:'SPX-003 / TEE', name:'Green Ravi',           price:85,  cat:'tee', imgs:['store/tee-green.png','store/tee-green-back.png'],               desc:'Earth tones for those who drift. 100% organic cotton, boxy cut.', sizes:['S','M','L','XL'] },
    { id:'spx-004', spec:'SPX-004 / TEE', name:'Strong Ravi',          price:85,  cat:'tee', imgs:['store/tee-strong.png','store/tee-strong-back.png'],             desc:'Power pose. Screen-printed heavyweight tee, double-stitched.', sizes:['XS','S','M','L','XL'] },
    { id:'spx-005', spec:'SPX-005 / TEE', name:'Ravi in Color',        price:90,  cat:'tee', imgs:['store/tee-color.png','store/tee-color-back.png'],               desc:'Full spectrum. Bold all-over print on natural heavyweight cotton.', sizes:['S','M','L','XL'] },
    { id:'spx-006', spec:'SPX-006 / TEE', name:'Snake Tee',            price:90,  cat:'tee', imgs:['store/tee-snake.png','store/tee-snake-back.png'],               desc:'Ancient symbol. Modern fit. Hand-drawn original graphic.', sizes:['XS','S','M','L','XL'] },
    { id:'spx-007', spec:'SPX-007 / TEE', name:'Ski Ravi',             price:90,  cat:'tee', imgs:['store/tee-ski.png','store/tee-ski-back.png'],                   desc:'Ravi on the slopes. Après-lab collection, limited edition.', sizes:['S','M','L','XL'] },
    { id:'spx-008', spec:'SPX-008 / TEE', name:'Fishing Ravi',         price:85,  cat:'tee', imgs:['store/tee-fishing.png'],                                        desc:'Patient energy. For those who wait for the right moment.', sizes:['XS','S','M','L','XL'] },
    { id:'spx-009', spec:'SPX-009 / TEE', name:'Ravi Clowns',          price:85,  cat:'tee', imgs:['store/tee-clowns.png'],                                         desc:'Life is absurd. Might as well laugh. Heavyweight cotton.', sizes:['S','M','L','XL'] },
    { id:'spx-010', spec:'SPX-010 / TEE', name:'Mom',                  price:85,  cat:'tee', imgs:['store/tee-mom.png'],                                            desc:'For the one who started it all. A tribute graphic on soft cotton.', sizes:['XS','S','M','L','XL'] },
    { id:'spx-011', spec:'SPX-011 / ACC', name:'Belt',                 price:145, cat:'acc', imgs:['store/acc-belt.png'],                                           desc:'Hand-tooled leather. RSL logo embossed at the buckle. Adjustable.', sizes:['One Size'] },
    { id:'spx-012', spec:'SPX-012 / ACC', name:'Chain',                price:199, cat:'acc', imgs:['store/acc-chain.png'],                                          desc:'Sterling silver-plated. 24" length. Heavy link construction.', sizes:['One Size'] },
    { id:'spx-013', spec:'SPX-013 / ACC', name:'Timepiece',            price:599, cat:'acc', imgs:['store/acc-watch.png'],                                          desc:'Mechanical movement. Lab-grade precision. Sapphire crystal.', sizes:['One Size'] },
    { id:'spx-014', spec:'SPX-014 / OBJ', name:'Buddha Ravi',          price:350, cat:'obj', imgs:['store/obj-buddha.png'],                                         desc:'Cast resin, hand-painted. Meditation companion. Signed edition.', sizes:['One Size'] },
    { id:'spx-015', spec:'SPX-015 / OBJ', name:'Wood Ravi',            price:280, cat:'obj', imgs:['store/obj-wood.png'],                                           desc:'Reclaimed oak, CNC carved and hand-finished. Each piece unique.', sizes:['One Size'] },
    { id:'spx-016', spec:'SPX-016 / OBJ', name:'Blue Horse',           price:320, cat:'obj', imgs:['store/obj-horse.png'],                                          desc:'Ceramic glaze over earthenware. One of 12 in the series.', sizes:['One Size'] },
];

// ── SHOP RENDER ───────────────────────────────────────────────────
function renderShop(cat) {
    const grid = document.getElementById('shop-grid');
    grid.innerHTML = '';
    const list = cat === 'all' ? PRODUCTS : PRODUCTS.filter(p => p.cat === cat);
    list.forEach(p => {
        const item = document.createElement('div');
        item.className = 'shop-item';
        item.dataset.cat = p.cat;
        item.onclick = () => openPDP(p.id);
        item.innerHTML = `
            <div class="shop-img-wrap">
                <img src="${p.imgs[0]}" alt="${p.name}" loading="lazy">
                <div class="shop-scan"></div>
            </div>
            <div class="shop-item-info">
                <div class="shop-item-spec">${p.spec}</div>
                <span class="shop-item-name">${p.name}</span>
                <span class="shop-item-price">$${p.price}</span>
            </div>`;
        grid.appendChild(item);
    });
    document.getElementById('shop-count').textContent = list.length + ' specimen' + (list.length !== 1 ? 's' : '');
}

function filterShop(cat) {
    document.querySelectorAll('.shop-filter-btn').forEach(b =>
        b.classList.toggle('active', b.dataset.filter === cat)
    );
    renderShop(cat);
}

// ── PRODUCT DETAIL ────────────────────────────────────────────────
let currentPDP = null;
let selectedSize = null;

function openPDP(id) {
    const p = PRODUCTS.find(x => x.id === id);
    if (!p) return;
    currentPDP = p;
    selectedSize = p.sizes.length === 1 ? p.sizes[0] : null;

    document.getElementById('pdp-spec').textContent  = p.spec;
    document.getElementById('pdp-name').textContent  = p.name;
    document.getElementById('pdp-price').textContent = '$' + p.price;
    document.getElementById('pdp-desc').textContent  = p.desc;
    document.getElementById('pdp-main-img').src      = p.imgs[0];

    const thumbs = document.getElementById('pdp-thumbs');
    thumbs.innerHTML = '';
    if (p.imgs.length > 1) {
        p.imgs.forEach((src, i) => {
            const btn = document.createElement('button');
            btn.className = 'pdp-thumb' + (i === 0 ? ' active' : '');
            btn.innerHTML = `<img src="${src}" alt="">`;
            btn.onclick = () => {
                document.getElementById('pdp-main-img').src = src;
                thumbs.querySelectorAll('.pdp-thumb').forEach((t,j) => t.classList.toggle('active', j === i));
            };
            thumbs.appendChild(btn);
        });
    }

    const sizes = document.getElementById('pdp-sizes');
    sizes.innerHTML = '';
    p.sizes.forEach(sz => {
        const btn = document.createElement('button');
        btn.className = 'pdp-size-btn' + (p.sizes.length === 1 ? ' active' : '');
        btn.textContent = sz;
        btn.onclick = () => {
            selectedSize = sz;
            sizes.querySelectorAll('.pdp-size-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        };
        sizes.appendChild(btn);
    });

    document.getElementById('pdp-overlay').classList.add('open');
    document.body.style.overflow = 'hidden';
}

function closePDP() {
    document.getElementById('pdp-overlay').classList.remove('open');
    document.body.style.overflow = '';
}

// ── CART ──────────────────────────────────────────────────────────
let cart = JSON.parse(localStorage.getItem('rsl-cart') || '[]');

function addToCart() {
    if (!selectedSize) {
        const el = document.getElementById('pdp-sizes');
        el.classList.remove('shake');
        void el.offsetWidth;
        el.classList.add('shake');
        return;
    }
    const ex = cart.find(i => i.id === currentPDP.id && i.size === selectedSize);
    if (ex) { ex.qty++; } else { cart.push({ id: currentPDP.id, size: selectedSize, qty: 1 }); }
    saveCart();
    updateCartBadge();
    closePDP();
    toast('Added to cart', '✓');
}

function removeFromCart(id, size) {
    cart = cart.filter(i => !(i.id === id && i.size === size));
    saveCart();
    updateCartBadge();
    renderCartItems();
}

function saveCart() { localStorage.setItem('rsl-cart', JSON.stringify(cart)); }

function updateCartBadge() {
    const total = cart.reduce((s, i) => s + i.qty, 0);
    const badge = document.getElementById('cart-badge');
    badge.textContent = total;
    badge.style.display = total > 0 ? 'flex' : 'none';
}

function renderCartItems() {
    const list   = document.getElementById('cart-list');
    const empty  = document.getElementById('cart-empty');
    const footer = document.getElementById('cart-footer');
    if (cart.length === 0) {
        list.innerHTML = '';
        list.appendChild(empty);
        empty.style.display = 'block';
        footer.style.display = 'none';
        return;
    }
    empty.style.display = 'none';
    footer.style.display = 'flex';
    list.innerHTML = '';
    let sub = 0;
    cart.forEach(item => {
        const p = PRODUCTS.find(x => x.id === item.id);
        if (!p) return;
        sub += p.price * item.qty;
        const row = document.createElement('div');
        row.className = 'cart-item';
        row.innerHTML = `
            <img class="cart-item-img" src="${p.imgs[0]}" alt="${p.name}">
            <div class="cart-item-info">
                <div class="cart-item-name">${p.name}</div>
                <div class="cart-item-meta">${item.size} &nbsp;·&nbsp; Qty ${item.qty}</div>
                <div class="cart-item-price">$${p.price * item.qty}</div>
            </div>
            <button class="cart-item-remove" onclick="removeFromCart('${item.id}','${item.size}')">×</button>`;
        list.appendChild(row);
    });
    document.getElementById('cart-subtotal').textContent = '$' + sub;
    document.getElementById('cart-total').textContent    = '$' + (sub + 12);
}

function openCart() {
    renderCartItems();
    document.getElementById('cart-drawer').classList.add('open');
    document.getElementById('cart-backdrop').classList.add('open');
    document.body.style.overflow = 'hidden';
}

function closeCart() {
    document.getElementById('cart-drawer').classList.remove('open');
    document.getElementById('cart-backdrop').classList.remove('open');
    document.body.style.overflow = '';
}

// ── CHECKOUT ──────────────────────────────────────────────────────
let coStep = 1;

function openCheckout() {
    closeCart();
    coStep = 1;
    showCoStep(1);
    renderCoSummary();
    document.getElementById('checkout-overlay').classList.add('open');
    document.body.style.overflow = 'hidden';
}

function closeCheckout() {
    document.getElementById('checkout-overlay').classList.remove('open');
    document.body.style.overflow = '';
}

function showCoStep(n) {
    coStep = n;
    [1,2,3].forEach(i => {
        const step = document.getElementById('co-step-' + i);
        const ind  = document.getElementById('co-ind-' + i);
        if (step) step.classList.toggle('active', i === n);
        if (ind) {
            ind.classList.toggle('active', i === n);
            ind.classList.toggle('done', i < n);
        }
    });
}

function renderCoSummary() {
    const list = document.getElementById('co-items');
    list.innerHTML = '';
    let sub = 0;
    cart.forEach(item => {
        const p = PRODUCTS.find(x => x.id === item.id);
        if (!p) return;
        const line = p.price * item.qty;
        sub += line;
        list.innerHTML += `<div class="co-item"><span>${p.name} × ${item.qty}</span><span>$${line}</span></div>`;
    });
    document.getElementById('co-subtotal').textContent  = '$' + sub;
    document.getElementById('co-total-val').textContent = '$' + (sub + 12);
}

function nextCheckoutStep() {
    if (coStep === 1) {
        const ids = ['co-fname','co-email','co-address','co-city','co-zip'];
        let ok = true;
        ids.forEach(id => {
            const el = document.getElementById(id);
            const valid = el && el.value.trim();
            if (el) el.classList.toggle('error', !valid);
            if (!valid) ok = false;
        });
        if (!ok) return;
        showCoStep(2);
    } else if (coStep === 2) {
        const ids = ['co-card','co-expiry','co-cvv','co-card-name'];
        let ok = true;
        ids.forEach(id => {
            const el = document.getElementById(id);
            const valid = el && el.value.trim();
            if (el) el.classList.toggle('error', !valid);
            if (!valid) ok = false;
        });
        if (!ok) return;
        // generate order number and complete
        const orderNum = 'RSL-' + Date.now().toString(36).toUpperCase().slice(-6);
        document.getElementById('co-order-num').textContent = orderNum;
        cart = []; saveCart(); updateCartBadge();
        showCoStep(3);
    }
}

// Card input formatting
document.addEventListener('DOMContentLoaded', () => {
    renderShop('all');
    updateCartBadge();

    document.getElementById('co-card')?.addEventListener('input', e => {
        let v = e.target.value.replace(/\D/g,'').slice(0,16);
        e.target.value = v.replace(/(.{4})/g,'$1 ').trim();
    });
    document.getElementById('co-expiry')?.addEventListener('input', e => {
        let v = e.target.value.replace(/\D/g,'').slice(0,4);
        if (v.length >= 3) v = v.slice(0,2) + '/' + v.slice(2);
        e.target.value = v;
    });
    document.getElementById('co-cvv')?.addEventListener('input', e => {
        e.target.value = e.target.value.replace(/\D/g,'').slice(0,4);
    });
});

// ── Contact ───────────────────────────────────────────────────────
function handleContact(e) {
    e.preventDefault();
    toast('Message sent!', '✉️');
    e.target.reset();
}

// ── Toast ─────────────────────────────────────────────────────────
function toast(msg, icon = '✓') {
    const area = document.getElementById('toast-area');
    const el   = document.createElement('div');
    el.className = 'toast';
    el.innerHTML = `<span>${icon}</span><span>${msg}</span>`;
    area.appendChild(el);
    setTimeout(() => {
        el.classList.add('out');
        setTimeout(() => el.remove(), 260);
    }, 3000);
}

// ── Tilt (desktop) ───────────────────────────────────────────────
function initTilt(gridId) {
    const grid = document.getElementById(gridId);
    if (!grid || window.matchMedia('(pointer:coarse)').matches) return;

    grid.querySelectorAll('.pin').forEach(pin => {
        pin.addEventListener('mousemove', e => {
            const r  = pin.getBoundingClientRect();
            const rx = ((e.clientY - r.top  - r.height / 2) / (r.height / 2)) * -12;
            const ry = ((e.clientX - r.left - r.width  / 2) / (r.width  / 2)) *  12;
            pin.style.transform  = `perspective(900px) rotateX(${rx}deg) rotateY(${ry}deg) scale(1.02)`;
            pin.style.transition = 'transform 0.08s ease-out';
            pin.style.zIndex     = '5';
        });
        pin.addEventListener('mouseleave', () => {
            pin.style.transform  = 'perspective(900px) rotateX(0) rotateY(0) scale(1)';
            pin.style.transition = 'transform 0.4s ease-out';
            pin.style.zIndex     = '';
        });
    });
}

// ── Swipe support for lightbox ────────────────────────────────────
let _tx = 0, _ty = 0;
const lb = document.getElementById('lightbox');
lb.addEventListener('touchstart', e => {
    _tx = e.touches[0].clientX;
    _ty = e.touches[0].clientY;
}, { passive: true });
lb.addEventListener('touchend', e => {
    const dx = e.changedTouches[0].clientX - _tx;
    const dy = e.changedTouches[0].clientY - _ty;
    if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > 40) {
        stepImg(dx > 0 ? -1 : 1);          // swipe left = next, right = prev
    } else if (dy > 80 && Math.abs(dx) < 40) {
        closeLightbox();                     // swipe down to close
    }
}, { passive: true });

// ── Keyboard shortcuts ────────────────────────────────────────────
document.addEventListener('keydown', e => {
    const lb = document.getElementById('lightbox');
    if (!lb.classList.contains('active')) return;
    if (e.key === 'Escape')     closeLightbox();
    if (e.key === 'ArrowLeft')  stepImg(-1);
    if (e.key === 'ArrowRight') stepImg(1);
});

// ── Scroll effects ────────────────────────────────────────────────
function updateHeaderMode() {
    const h       = document.getElementById('header');
    const onHome  = document.getElementById('home-page').classList.contains('active');
    const hero    = document.getElementById('hero-section');
    const heroH   = hero ? hero.offsetHeight : 0;
    const overHero = onHome && window.scrollY < heroH - 80;
    const farDown  = window.scrollY > 60;

    h.classList.toggle('hero-mode', overHero);
    h.classList.toggle('scrolled',  !overHero && farDown);
    document.getElementById('back-top').classList.toggle('show', window.scrollY > 400);
}
window.addEventListener('scroll', updateHeaderMode, { passive: true });

// ── Hash routing ──────────────────────────────────────────────────
window.addEventListener('load', () => {
    const hash = window.location.hash.replace('#', '');
    if (['home','saved','shop','contact'].includes(hash)) showPage(hash);
});

// ── Loader ────────────────────────────────────────────────────────
(function () {
    const ldrEl     = document.getElementById('loader');
    const ldrCount  = document.getElementById('ldr-count');
    const ldrFill   = document.getElementById('ldr-fill');
    const ldrStatus = document.getElementById('ldr-status');
    const ldrDate   = document.getElementById('ldr-date');
    const hv        = document.getElementById('hero-video');

    // Date stamp
    ldrDate.textContent = new Date().toISOString().slice(0, 10).replace(/-/g, '.');

    // Show terminal lines with delay
    ['ldr-l1', 'ldr-l2', 'ldr-l3'].forEach((id, i) => {
        setTimeout(() => document.getElementById(id).classList.add('show'), i * 380 + 120);
    });

    let count      = 0;
    let videoReady = false;
    let minDone    = false;
    let finished   = false;
    const statuses = ['INITIALIZING', 'LOADING ASSETS', 'CALIBRATING', 'RENDERING', 'LAUNCHING'];

    function finishLoader() {
        if (finished || !videoReady || !minDone) return;
        finished = true;
        clearInterval(countTimer);
        ldrCount.textContent = '100';
        ldrFill.style.width  = '100%';
        ldrStatus.textContent = 'COMPLETE';
        setTimeout(() => {
            ldrEl.classList.add('done');
            document.body.classList.add('ready');
            updateHeaderMode();
        }, 480);
    }

    // Minimum visible time so animation breathes
    setTimeout(() => { minDone = true; finishLoader(); }, 2600);

    // Video ready signal
    if (hv) {
        hv.addEventListener('canplaythrough', () => { videoReady = true; finishLoader(); }, { once: true });
        hv.addEventListener('playing', () => hv.classList.add('playing'), { once: true });
    } else {
        videoReady = true;
    }
    // Hard fallback — never trap user more than 10s
    setTimeout(() => { if (!videoReady) { videoReady = true; finishLoader(); } }, 10000);

    // Counting animation — fast start, slows near 99
    const countTimer = setInterval(() => {
        if (count >= 99 || finished) return;
        const speed = count < 60 ? (Math.random() * 4 + 2)
                    : count < 85 ? (Math.random() * 1.8 + 0.6)
                                 : (Math.random() * 0.5 + 0.1);
        count = Math.min(count + speed, 99);
        const r = Math.floor(count);
        ldrCount.textContent = String(r).padStart(3, '0');
        ldrFill.style.width  = r + '%';
        ldrStatus.textContent = statuses[Math.min(Math.floor(r / 22), statuses.length - 2)];
    }, 40);
})();

// ── Easter eggs ───────────────────────────────────────────────────
console.log('%c🔬 Ravi Sauce Labs', 'font-size:18px;color:#2DD512;font-weight:bold;');
console.log('%cType unlock() for a surprise.', 'color:#888;font-style:italic;');

window.unlock = () => {
    document.body.style.filter = 'hue-rotate(180deg)';
    setTimeout(() => document.body.style.filter = '', 600);
    return '🔓';
};

// Konami code → matrix rain
let kseq = [];
const kcode = ['ArrowUp','ArrowUp','ArrowDown','ArrowDown','ArrowLeft','ArrowRight','ArrowLeft','ArrowRight','b','a'];
document.addEventListener('keydown', e => {
    kseq.push(e.key); kseq = kseq.slice(-10);
    if (kseq.join(',') !== kcode.join(',')) return;

    const c = document.createElement('canvas');
    Object.assign(c.style, { position:'fixed', inset:'0', width:'100%', height:'100%', zIndex:'9998', pointerEvents:'none' });
    document.body.appendChild(c);
    c.width = innerWidth; c.height = innerHeight;
    const ctx  = c.getContext('2d');
    const chars = 'RAVISAUCE';
    const cols  = Math.floor(c.width / 14);
    const drops = Array(cols).fill(1);
    let frames  = 0;
    const id = setInterval(() => {
        ctx.fillStyle = 'rgba(0,0,0,0.05)';
        ctx.fillRect(0, 0, c.width, c.height);
        ctx.fillStyle = '#2DD512';
        ctx.font = '14px monospace';
        drops.forEach((y, i) => {
            ctx.fillText(chars[Math.floor(Math.random() * chars.length)], i * 14, y * 14);
            if (y * 14 > c.height && Math.random() > 0.975) drops[i] = 0;
            drops[i]++;
        });
        if (++frames > 300) { clearInterval(id); c.remove(); }
    }, 50);
});

// ── HUD clock ─────────────────────────────────────────────────────
(function () {
    const el = document.getElementById('hud-clock');
    if (!el) return;
    function tick() {
        const n = new Date();
        el.textContent = String(n.getHours()).padStart(2,'0') + ':' +
                         String(n.getMinutes()).padStart(2,'0') + ':' +
                         String(n.getSeconds()).padStart(2,'0');
    }
    tick();
    setInterval(tick, 1000);
})();

// ── Panel videos: random start times (each source URL is unique so browser
//    treats them as independent streams — no shared buffer sync) ────────
(function () {
    document.querySelectorAll('.hud-vid').forEach(v => {
        const isMain = v.classList.contains('hud-vid-main');

        function seekRandom() {
            if (!isMain && v.duration > 2) {
                // Pick a random point but leave 1s buffer before end
                v.currentTime = 0.5 + Math.random() * (v.duration - 1.5);
            }
        }

        // Primary: set on loadedmetadata
        v.addEventListener('loadedmetadata', seekRandom, { once: true });

        // Fallback: if canplay fires before seek stuck, reapply
        v.addEventListener('canplay', () => {
            if (!isMain && v.currentTime < 0.3 && v.duration > 2) seekRandom();
        }, { once: true });

        v.addEventListener('playing', () => v.classList.add('playing'), { once: true });
    });
})();

// ── Hero panels: designed layout + drag (mouse desktop, touch mobile) ─
(function () {
    const hero  = document.getElementById('hero-section');
    const isMob = window.innerWidth <= 900;
    const PAD   = 12;
    const BAR_H = 50;
    const NAV_H = 74;  // nav height + gap — keep panels below this on mobile

    // On mobile: show pa + pb + main (3 panels)
    // On desktop: all 7 panels
    const all = [...document.querySelectorAll('.hud-panel')];
    const panels = isMob
        ? all.filter(p => p.classList.contains('hud-pa') ||
                          p.classList.contains('hud-pb') ||
                          p.classList.contains('hud-main'))
        : all;

    // [leftF, topF, widthF, heightF, wobblePx]
    const DESKTOP_L = [
        [0.01, 0.02, 0.12, 0.48, 16],  // pa — tall portrait, far left
        [0.01, 0.53, 0.10, 0.27, 14],  // pb — short square, below pa
        [0.14, 0.04, 0.08, 0.34, 12],  // pc — thin sliver overlapping main
        [0.14, 0.42, 0.09, 0.40, 12],  // pd — taller sliver below pc
        [0.75, 0.04, 0.13, 0.22, 18],  // pe — small floating top-right
        [0.76, 0.60, 0.21, 0.32, 16],  // pf — wider bottom-right
        [0.77, 0.30, 0.13, 0.26, 14],  // pg — portrait, right-center gap
        [0.19, 0.03, 0.74, 0.90,  8],  // main — dominant center
    ];
    const MOBILE_L = [
        [0.04, 0.13, 0.44, 0.38, 12],  // pa — medium, upper-left
        [0.52, 0.52, 0.42, 0.35, 10],  // pb — medium, lower-right
        [0.07, 0.10, 0.78, 0.65,  8],  // main — large, central
    ];
    const DESKTOP_Z = [3, 3, 4, 4, 5, 5, 5, 1];
    const MOBILE_Z  = [4, 4, 1];

    const LAYOUTS = isMob ? MOBILE_L  : DESKTOP_L;
    const Z_ORDER = isMob ? MOBILE_Z  : DESKTOP_Z;

    function wobble(px) { return Math.round((Math.random() - 0.5) * 2 * px); }

    function place() {
        const W = hero.offsetWidth;
        const H = hero.offsetHeight;
        const minTop = isMob ? NAV_H : PAD;
        panels.forEach((panel, i) => {
            const [lf, tf, wf, hf, wob] = LAYOUTS[i];
            const w    = Math.round(wf * W);
            const h    = Math.round(hf * (H - BAR_H));
            const left = Math.max(PAD, Math.round(lf * W) + wobble(wob));
            const top  = Math.max(minTop, Math.round(tf * (H - BAR_H)) + wobble(wob));
            panel.style.left   = left + 'px';
            panel.style.top    = top  + 'px';
            panel.style.width  = w    + 'px';
            panel.style.height = h    + 'px';
            panel.style.right  = 'auto';
            panel.style.bottom = 'auto';
            panel.style.zIndex = Z_ORDER[i];
        });
    }

    let highZ = 10;

    function initDrag() {
        panels.forEach(panel => {
            if (isMob) {
                // ── Touch drag ──
                let sx, sy, sl, st;
                panel.addEventListener('touchstart', e => {
                    sx = e.touches[0].clientX;
                    sy = e.touches[0].clientY;
                    // Read from inline style if already dragged, else from rendered position
                    if (panel.style.left) {
                        sl = parseInt(panel.style.left);
                        st = parseInt(panel.style.top);
                    } else {
                        const hr = hero.getBoundingClientRect();
                        const pr = panel.getBoundingClientRect();
                        sl = pr.left - hr.left;
                        st = pr.top  - hr.top;
                    }
                    panel.style.zIndex = ++highZ;
                }, { passive: true });

                panel.addEventListener('touchmove', e => {
                    e.preventDefault();
                    const W = hero.offsetWidth;
                    const H = hero.offsetHeight;
                    let l = sl + (e.touches[0].clientX - sx);
                    let t = st + (e.touches[0].clientY - sy);
                    l = Math.max(PAD, Math.min(l, W - panel.offsetWidth  - PAD));
                    t = Math.max(NAV_H, Math.min(t, H - BAR_H - panel.offsetHeight - PAD));
                    panel.style.left = l + 'px';
                    panel.style.top  = t + 'px';
                }, { passive: false });

            } else {
                // ── Mouse drag ──
                panel.addEventListener('mousedown', e => {
                    e.preventDefault();
                    const heroR = hero.getBoundingClientRect();
                    const offX  = e.clientX - heroR.left - parseInt(panel.style.left || 0);
                    const offY  = e.clientY - heroR.top  - parseInt(panel.style.top  || 0);
                    panel.classList.add('dragging');
                    panel.style.zIndex = ++highZ;

                    function onMove(e) {
                        const heroR = hero.getBoundingClientRect();
                        const W = hero.offsetWidth;
                        const H = hero.offsetHeight;
                        let l = e.clientX - heroR.left - offX;
                        let t = e.clientY - heroR.top  - offY;
                        l = Math.max(PAD, Math.min(l, W - panel.offsetWidth  - PAD));
                        t = Math.max(PAD, Math.min(t, H - BAR_H - panel.offsetHeight - PAD));
                        panel.style.left = l + 'px';
                        panel.style.top  = t + 'px';
                    }
                    function onUp() {
                        panel.classList.remove('dragging');
                        document.removeEventListener('mousemove', onMove);
                        document.removeEventListener('mouseup',  onUp);
                    }
                    document.addEventListener('mousemove', onMove);
                    document.addEventListener('mouseup',  onUp);
                });
            }
        });
    }

    function initResize() {
        if (isMob) return;
        const DIRS = ['nw', 'ne', 'sw', 'se'];
        const MIN_W = 80, MIN_H = 60;

        panels.forEach(panel => {
            DIRS.forEach(dir => {
                const handle = document.createElement('div');
                handle.className = 'resize-handle';
                handle.dataset.dir = dir;
                panel.appendChild(handle);

                handle.addEventListener('mousedown', e => {
                    e.preventDefault();
                    e.stopPropagation(); // don't trigger drag
                    panel.style.zIndex = ++highZ;

                    const startX = e.clientX, startY = e.clientY;
                    const startL = parseInt(panel.style.left) || 0;
                    const startT = parseInt(panel.style.top)  || 0;
                    const startW = panel.offsetWidth;
                    const startH = panel.offsetHeight;

                    function onMove(e) {
                        const dx = e.clientX - startX;
                        const dy = e.clientY - startY;
                        const W  = hero.offsetWidth;
                        const H  = hero.offsetHeight;
                        let l = startL, t = startT, w = startW, h = startH;

                        if (dir === 'se' || dir === 'ne') w = Math.max(MIN_W, startW + dx);
                        if (dir === 'sw' || dir === 'nw') {
                            const nw = Math.max(MIN_W, startW - dx);
                            l = startL + (startW - nw);
                            w = nw;
                        }
                        if (dir === 'sw' || dir === 'se') h = Math.max(MIN_H, startH + dy);
                        if (dir === 'nw' || dir === 'ne') {
                            const nh = Math.max(MIN_H, startH - dy);
                            t = startT + (startH - nh);
                            h = nh;
                        }
                        l = Math.max(PAD, Math.min(l, W - MIN_W - PAD));
                        t = Math.max(PAD, Math.min(t, H - BAR_H - MIN_H - PAD));
                        panel.style.left   = l + 'px';
                        panel.style.top    = t + 'px';
                        panel.style.width  = w + 'px';
                        panel.style.height = h + 'px';
                    }
                    function onUp() {
                        document.removeEventListener('mousemove', onMove);
                        document.removeEventListener('mouseup', onUp);
                    }
                    document.addEventListener('mousemove', onMove);
                    document.addEventListener('mouseup', onUp);
                });
            });
        });
    }

    function fadeInPanels() {
        panels.forEach((panel, i) => {
            setTimeout(() => panel.classList.add('panel-in'), i * 380);
        });
    }

    requestAnimationFrame(() => {
        if (!isMob) place();   // mobile panels are CSS-positioned
        initDrag();
        initResize();

        // Stagger fade-in after the loader finishes
        if (document.body.classList.contains('ready')) {
            fadeInPanels();
        } else {
            const obs = new MutationObserver((_, o) => {
                if (!document.body.classList.contains('ready')) return;
                o.disconnect();
                setTimeout(fadeInPanels, 100);
            });
            obs.observe(document.body, { attributes: true, attributeFilter: ['class'] });
        }
    });
})();

// ── Init ──────────────────────────────────────────────────────────
renderHome();
renderSaved();
</script>
</body>
</html>
